<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reason & Resolution</title>
  <style>
@import url("https://unpkg.com/normalize.css") layer(normalize);
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap');

@layer normalize, base, demo, scroll, popover;

/* Canonical font-family: Poppins for all main text elements */
body,
h1, h2, h3, h4, h5, h6,
p,
.heading,
.mast__title,
.mast__title.js-spanize,
.mast__text,
.mast__texts,
.life-paragraph,
.balance-paragraph,
.project-title,
.project-year,
.zackgort-paragraph {
  font-family: 'Poppins', Helvetica, Arial, sans-serif !important;
}


/* Remove legacy font-family from these elements (handled above) */
.project-title,
.project-year,
.zackgort-paragraph {
  /* font-family intentionally omitted for canonical Poppins inheritance */
}

.page { display: none; }
.page.active { display: block; }
#page-life.active {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  padding-bottom: env(safe-area-inset-bottom);
}
#page-life.active .page-inner {
  position: fixed;
  top: var(--header-h);
  bottom: calc(var(--trigger-offset) + env(safe-area-inset-bottom));
  left: 0; right: 0;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}
#page-life .content {
  display: flex;
  height: 90vh;
  flex-direction: column;
  box-sizing: border-box;
  width: 100%;
  max-width: 720px;
  margin-left: auto;
  margin-right: auto;
  padding-top: calc(var(--header-h));
  padding-bottom: calc(var(--trigger-offset) + env(safe-area-inset-bottom));
  padding-left: 5rem;
  padding-right: 5rem;
  overflow-x: hidden;
  overflow-y: auto;
}
#page-life .content > section {
  scroll-margin-top: var(--header-h);
  scroll-margin-bottom: var(--trigger-offset);
}
#page-life .scroll-spacer {
  height: calc(var(--trigger-offset) + env(safe-area-inset-bottom) + 20vh);
  flex-shrink: 0;
}
/* --- UPDATED: Match work page headings --- */
#page-life h1,
#page-life h2,
#page-life h3,
#page-life h4,
#page-life h5,
#page-life h6 {
  position: relative;
  mix-blend-mode: exclusion;
  font-size: 1.8rem;
  font-weight: 200;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 0.8em;
  opacity: 0.92;
  color: #fff !important;
  line-height: 1.15;
}
@media (max-width: 768px) {
  #page-life h1,
  #page-life h2,
  #page-life h3,
  #page-life h4,
  #page-life h5,
  #page-life h6 {
    font-size: 1.4rem;
  }
}
@media (max-width: 600px) {
  #page-life h1,
  #page-life h2,
  #page-life h3,
  #page-life h4,
  #page-life h5,
  #page-life h6 {
    font-size: 1.4em;
    letter-spacing: 0.01em;
  }
}
@media (max-width: 600px) {
  #page-life .content p {
    font-size: 0.98em;    /* Or your desired size */
    line-height: 1.5;     /* Or your desired spacing */
    margin-bottom: 0.7em; /* Or your desired spacing */
    padding: 0 0.15em;    /* Optional: horizontal padding */
  }
}



#page-life .content > *:last-child {
  margin-bottom: 0;
  padding-bottom: 0;
}
#page-life .content * { max-width: 100%; }
#page-life .section-image {
  padding: 1.5em 0 1.5em 0;
}
.heading { display: flex; flex-direction: column; padding-top: 1em; align-items: left; }
.section-image {
  display: block;
  width: 100%;
  max-width: 320px;
  margin: 0 auto 1.25em auto;
  border-radius: 8px;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
  object-fit: cover;
  filter: grayscale(100%);
  transition: filter 0.3s ease;
}
.section-image:hover { filter: grayscale(0%); }

@media (max-width: 600px) {
  .section-image { max-width: 100%; border-radius: 8px; }
}

.life-section {
  opacity: 0;
  transform: translateY(40px);
  transition: opacity 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94),
              transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  will-change: opacity, transform;
}
.life-section.visible { opacity: 1; transform: translateY(0); }
:root {
  --cursor-size: 28px;
  --blob-col: #faf7ee;
  --spacing-base: 1rem;
  --spacing-md: 1.5rem;
  --spacing-lg: 2rem;
  --font-size-base: 14px;
  --color-text: #fff;
  --color-text-dim: 0.6;
  --transition-medium: 0.3s ease;
  --layers: 5;
  --blur-max: 40;
  --mask-stop: 25;
  --warm-off-black: #000;
  --warm-off-white: #fff;
  --header-h: 6rem;
  --trigger-offset: calc(2rem + 44px);
  --cursor-sleep-radius: 300px;
  --connect-font-mono: "Cutive Mono", monospace;
}

@layer base {
  :root {
    --font-size-min: 14;
    --font-size-max: 16;
    --font-ratio-min: 1.2;
    --font-ratio-max: 1.33;
    --font-width-min: 375;
    --font-width-max: 1280;
  }
  html { color-scheme: light dark; overscroll-behavior: none; }
  [data-theme="light"] { color-scheme: light only; }
  [data-theme="dark"] { color-scheme: dark only; }
  :where(.fluid) {
    --fluid-min: calc(var(--font-size-min) * pow(var(--font-ratio-min), var(--font-level, 0)));
    --fluid-max: calc(var(--font-size-max) * pow(var(--font-ratio-max), var(--font-level, 0)));
    --fluid-preferred: calc((var(--fluid-max) - var(--fluid-min)) / (var(--font-width-max) - var(--font-width-min)));
    --fluid-type: clamp((var(--fluid-min) / 16) * 1rem, ((var(--fluid-min) / 16) * 1rem) - (((var(--fluid-preferred) * var(--font-width-min)) / 16) * 1rem) + (var(--fluid-preferred) * var(--variable-unit, 100vi)), (var(--fluid-max) / 16) * 1rem);
    font-size: var(--fluid-type);
  }
  *, *:after, *:before { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    display: grid;
    place-items: center;
    background: var(--warm-off-black);
    /* Canonical font-family already set above */
    text-transform: none;
    letter-spacing: .05em;
    line-height: 1.4em;
    color: var(--warm-off-white);
    position: relative;
    overflow: hidden;
    min-height: 100vh;
    display: grid;
    place-items: left;
  }
  body::before {
    --size: 45px;
    --line: color-mix(in lch, canvasText, transparent 70%);
    content: "";
    height: 100vh;
    width: 100vw;
    position: fixed;
    top: 0;
    transform-style: flat;
    pointer-events: none;
    background: transparent !important;
  }
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: normal;
    border-width: 0;
  }
}

.site-header {
  position: fixed;
  top: 1.85rem;
  left: 0;
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  isolation: isolate;
  pointer-events: auto;
  z-index: 200;
}
.logo-wrapper {
  display: flex;
  margin: 0 0 0 3%;
  justify-content: center;
  align-items: center;
  pointer-events: auto;
  transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.3, 1);  
  
}
.logo-wrapper:hover { filter: url("#logo-spotlight"); }
.logo-wrapper a { text-decoration: none !important; outline: none !important; }
.trademark-container {
  position: relative;
  transition: transform 0.6s ease;
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 50%;
}


/* Add this for the rotation effect */
.logo-wrapper:hover,
.logo-wrapper:focus-visible {
  animation: spin360 0.9s cubic-bezier(0.6, 0.2, 0.3, 1);
}


.trademark-symbol {
  width: 24px;
  height: 24px;
  border: 2px solid var(--warm-off-white);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  font-weight: bold;
  color: var(--warm-off-white);
}
.trademark-symbol .letter { transform: scaleX(-1); }
.superscript-symbol {
  position: absolute;
  top: -7px;
  right: -11px;
  font-size: 0.75em;
  color: var(--warm-off-white) !important;
}

@keyframes spin360 {
  to { transform: rotate(360deg); }
}



nav {
  position: relative;
  display: flex;
  align-items: center;
  width: fit-content;
  margin: 0 0 0 2.5%;
  border-radius: 100px;
  background: hsla(0, 0%, 100%, 0.05);
  border: 0.5px solid rgba(255, 255, 255, 0.35);
  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.02), 0 1.5px 8px 0 rgba(255, 255, 255, 0.06) inset;
  backdrop-filter: blur(0px) saturate(80%);
  -webkit-backdrop-filter: blur(0px) saturate(80%);
  transition: all 0.3s ease;
  pointer-events: auto;
  z-index: 200;
}
nav:hover,
nav.frosty {
  background: hsla(0, 0%, 100%, 0.18);
  border: 0.5px solid rgba(255, 255, 255, 0.65);
  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05),
              0 1.5px 8px 0 rgba(255, 255, 255, 0.1) inset;
  backdrop-filter: blur(6px) saturate(200%);
  -webkit-backdrop-filter: blur(6px) saturate(200%);
}
nav::before,
nav::after,
nav ul.lit { filter: url("#spotlight"); width: auto; }
nav::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  box-shadow: inset 2px 2px 0 -2px rgba(255, 255, 255, 0.9),
              inset 0 0 3px 1px rgba(255, 255, 255, 0.7);
}
nav::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  background: rgba(255, 255, 255, 0.1);
  box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.15),
              0 2px 12px 0 rgba(0, 0, 0, 0.05),
              0 1.5px 8px 0 rgba(255, 255, 255, 0.1) inset;
  backdrop-filter: blur(6px) saturate(250%);
  -webkit-backdrop-filter: blur(6px) saturate(250%);
}
nav ul {
  list-style: none;
  margin: 0;
  padding: 0;
  width: fit-content;
  margin: 0 auto;
  display: flex;
  align-items: center;
  height: 100%;
  font-size: 0.875rem;
}
nav ul.lit {
  position: absolute;
  inset: 0;
  pointer-events: none;
  filter: brightness(1.25);
}
nav ul.lit li { padding: 0.5rem 1.25rem; }
nav ul.content { position: relative; }
nav ul.content::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 100px;
  pointer-events: none;
  filter: url("#ambience") brightness(2);
}
nav ul.content li {
  height: 100%;
  display: grid;
  place-items: center;
}
nav ul.content a {
  display: grid;
  place-items: center;
  height: 100%;
  padding: 0.5rem 1.25rem;
  text-decoration: none;
  color: inherit;
  opacity: 0.4;
  transition: opacity 0.25s;
}
nav ul.content a:is(:hover, :focus-visible, [data-active="true"]) { opacity: 0.9; }
#cursor {
  position: fixed;
  top: calc(var(--cursor-size) * -0.5);
  left: calc(var(--cursor-size) * -0.5);
  pointer-events: none !important;
  mix-blend-mode: difference;
  filter: url("#goo");
  z-index: 200 !important;
}
.cursor-circle {
  position: absolute;
  width: var(--cursor-size);
  height: var(--cursor-size);
  border-radius: 50%;
  background: var(--blob-col);
}
.global-blur {
  position: fixed !important;
  left: 0;
  right: 0;
  bottom: 0;
  height: 22vh;
  pointer-events: none !important;
  z-index: 9999 !important;
  backdrop-filter: blur(32px);
  -webkit-backdrop-filter: blur(32px);
  mask-image: linear-gradient(to top, black 30%, transparent 100%);
}
.container {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  cursor: grab;
  touch-action: none;
  overscroll-behavior: contain;
  user-select: none;
}
.canvas, .item { will-change: transform; }
.item {
  position: absolute;
  overflow: hidden;
  background: #000;
  cursor: pointer;
  border-radius: var(--border-radius, 0);
}
.item-image-container {
  position: relative;
  width: 100%;
  height: 100%;
}
.item-image-container::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  box-shadow: inset 0 0 var(--vignette-size, 0) rgba(0, 0, 0, 0.5);
}
.item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  pointer-events: none;
  filter: grayscale(100%);
  transition: filter 0.3s ease, transform 0.3s ease;
}
.item:hover img,
.item:focus-within img {
  filter: grayscale(0%);
  transform: scale(var(--hover-scale, 1.05));
}
.item-caption {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  padding: 10px;
}
.item-name {
  font-family: "PP Neue Montreal", sans-serif;
  color: #fff;
  font-size: 12px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: -0.03em;
  margin-bottom: 2px;
  overflow: hidden;
  height: 16px;
}
.item-number {
  font-family: "TheGoodMonolith", monospace;
  color: #888;
  font-size: 10px;
  font-weight: 400;
  overflow: hidden;
  height: 14px;
}
.item-caption {
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease;
  pointer-events: none;
}
/*.item:hover .item-caption,
.item:focus-within .item-caption {
  opacity: 1;
  visibility: visible;
  transition: opacity 0.3s ease;
  pointer-events: auto;
}*/
#background-image-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
#background-image {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  transform: scale(1.2);
  opacity: 0;
  transition: transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.3s ease;
}
.projects-container {
  position: relative;
  width: 100%;
  max-width: 1000px;
  max-height: 80vh;
  margin: 0 auto;
  overflow-y: auto;
  padding: 20px;
  scrollbar-width: none;
  -ms-overflow-style: none;
}
.projects-container::-webkit-scrollbar { display: none; }
.project-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.7rem 0;
  border-bottom: 1px solid rgba(248, 245, 242, 0.1);
  cursor: pointer;
  position: relative;
}
.project-item::before {
  content: "";
  position: absolute;
  left: 0;
  bottom: 0;
  width: 100%;
  height: 0;
  background: var(--warm-off-white);
  transition: height 0.2s cubic-bezier(0.445, 0.05, 0.55, 0.95);
  pointer-events: none;
}
.project-item:hover::before { height: 100%; }
.project-title, .project-year {
  position: relative;
  mix-blend-mode: exclusion;
  font-size: 1.8rem;
}

@media (max-width: 768px) {
  .project-title, .project-year { font-size: 1.4rem; }
}

@media (max-width: 480px) {
  .project-item { flex-direction: column; gap: 0.5rem; }
}

#page-work .projects-container { padding-top: calc(100px + 2rem); }
.page .container { padding-top: calc(100px + 2rem); }
.page-vignette-container,
.page-vignette,
.page-vignette-strong,
.page-vignette-extreme,
.vignette,
.vignette-bottom {
  pointer-events: none !important;
  position: fixed !important;
  top: 0;
  left: 0;
  right: 0;
  bottom: env(safe-area-inset-bottom);
  z-index: 100 !important;
  mask-image: linear-gradient(to bottom, black 0%, black calc(100% - env(safe-area-inset-bottom)), transparent 100%);
}
#webgl-bg {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  z-index: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: visible;
}
#webgl-bg canvas {
  width: 100vw;
  height: 100vh;
  min-width: 100vw;
  min-height: 100vh;
  max-width: 100vw;
  max-height: 100vh;
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
  background: #000 !important;
  z-index: 0;
  aspect-ratio: 1 / 1;
}

@media (max-width: 699px) {
  #webgl-bg canvas {
    width: 200vmin;
    height: 200vmin;
    min-width: 200vw;
    min-height: 200vh;
    max-width: none;
    max-height: none;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    aspect-ratio: 1 / 1;
  }
}

.noise-overlay {
  position: fixed;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: url("https://assets.iceable.com/img/noise-transparent.png") 0 0/300px 300px repeat;
  animation: noise-anim 0.3s steps(5) infinite;
  opacity: .9;
  pointer-events: none;
  z-index: 50;
}

@keyframes noise-anim {
  0% { transform: translate(0, 0); }
  10% { transform: translate(-2%, -3%); }
  20% { transform: translate(-4%, 2%); }
  30% { transform: translate(2%, -4%); }
  40% { transform: translate(-2%, 5%); }
  50% { transform: translate(-4%, 2%); }
  60% { transform: translate(3%, 0); }
  70% { transform: translate(0, 3%); }
  80% { transform: translate(-3%, 0); }
  90% { transform: translate(2%, 2%); }
  100% { transform: translate(1%, 0); }
}

.blur { position: fixed; inset: 0; pointer-events: none !important; z-index: 100; }
#webgl-bg, body::before { z-index: 0 !important; }
.page { z-index: 10 !important; }
.site-header, nav, #cursor { z-index: 200 !important; pointer-events: auto !important; }
#cursor { pointer-events: none !important; }
.page .content,
.page main,
.page > .container { padding-top: calc(var(--header-h) + 0.5rem); }

@media (max-width: 600px) {
  #app { font-size: 1rem; padding: 0; }
  #page-life .content { padding-left: 1.25rem; padding-right: 1.25rem; padding-top: var(--header-h); }
  body { min-height: 100dvh; padding: 0; }
}

@layer scroll {
  :root { timeline-scope: --content; }
  @property --progress { initial-value: 0; syntax: "<integer>"; inherits: true; }
  :root {
    animation: scroll-progress both linear;
    animation-timeline: --content;
    counter-reset: progress var(--progress);
  }
  .content { scroll-timeline: --content; }
  @keyframes scroll-progress { to { --progress: 100; } }
  .progress {
    border-radius: 100px;
    background: light-dark(hsl(0 0% 35%), hsl(0 0% 0%));
    padding: 0.25rem 0.5rem;
    font-size: 1rem;
    min-width: 0;
    max-width: 100vw;
    overflow-x: auto;
    white-space: nowrap;
    box-sizing: border-box;
  }
  @media (max-width: 400px) {
    .progress { font-size: 0.85rem; padding: 0.18rem 0.35rem; }
  }
}

@layer demo {
  @media (prefers-reduced-motion: no-preference) {
    .content { scroll-behavior: smooth; }
  }
  body {
    min-height: 100vh;
    display: grid;
    place-items: left;
    background: light-dark(white, black);
    /* font-family intentionally omitted for canonical Poppins inheritance */
  }
  body::before {
    --size: 45px;
    --line: color-mix(in lch, canvasText, transparent 70%);
    content: "";
    height: 100vh;
    width: 100vw;
    position: fixed;
    top: 0;
    transform-style: flat;
    pointer-events: none;
  }
  @counter-style pad-it { system: extends decimal; pad: 2 "0"; }
  .content {
    width: 100vw;
    height: 100vh;
    overflow: auto;
    padding-block: 80px;
    mask: linear-gradient(#0000, #fff 80px calc(100% - 80px), #0000);
    @media (max-width: 680px) {
      mask: linear-gradient(#0000 60px, #fff 80px calc(100% - 80px), #0000);
    }
    scrollbar-color: hsl(0 100% 40%) #0000;
    scrollbar-width: thin;
  }
  html, body, body * { color: #fff !important; }
  h1 {
    --font-level: 4;
    line-height: 1;
    margin: 0;
    margin-bottom: 2rem;
  }
  h1 span { font-size: 0.35em; }
  h2 {
    --font-level: 4;
    line-height: 1;
    margin: 0;
    margin-bottom: 2rem;
    font-size: 2em;
  }
  header, main { width: 60ch; max-width: calc(100vw - 2rem); margin: 0 auto; }
  footer { padding: 1rem; font-size: 0.875rem; opacity: 0.875; text-align: center; }
  main { counter-reset: section; }
  section { counter-increment: section 1; scroll-margin-top: 4em; }
  h2::before { content: counter(section, pad-it) ". "; }
  header p { font-size: 1.125rem; }
  p { margin: 0; color: inherit; }
  p:not(:last-of-type) { margin-bottom: 1rem; }
  main p {
    color: color-mix(in hsl, canvasText, canvas 10%);
    font-weight: 300;
  }
  hr { opacity: 0.5; }
  hr, header, main { margin-bottom: 6rem; }
  .heading { position: relative; display: flex; }
  .heading:is(:hover, :focus-within) a { opacity: 1; }
  .heading a {
    opacity: 0;
    width: 24px;
    aspect-ratio: 1;
    position: absolute;
    color: inherit;
    right: calc(100% + 0.5rem);
    top: 0;
    display: grid;
    place-items: center;
    transition: opacity 0.2s;
    outline-color: transparent;
    border-radius: 6px;
  }
  .heading a:focus-visible { background: color-mix(in hsl, canvasText, #0000 75%); }
  .heading svg { width: 20px; }
}

.tp-dfwv { display: none !important; }
div.tp-dfwv { position: fixed; }
@counter-style pad-example { system: extends decimal; suffix: " "; pad: 2 " "; }
#page-life .content { display: flex; flex-direction: column; padding-top: calc(var(--header-h) + 2rem); }
#page-life { color: #222; }
#page-life .content {
  font-family: "Poppins", sans-serif;
  line-height: 1.7;
}
#page-life, #page-life * {
  color: #fff !important;
  text-shadow: 0 1px 8px rgba(0, 0, 0, 0.11);
}
#page-life.active .page-inner {
  height: 100%;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}
.blur { position: fixed; inset: 0; pointer-events: none; }
.blur, .blur-home, .blur-work, .blur-life, .blur-balance, .blur-connect {
  position: fixed !important;
  inset: 0;
  pointer-events: none !important;
  z-index: 100 !important;
}
.blur > div,
.blur-home > div,
.blur-work > div,
.blur-life > div,
.blur-balance > div,
.blur-connect > div {
  position: absolute;
  inset: 0;
  pointer-events: none;
  backdrop-filter: blur(32px);
  -webkit-backdrop-filter: blur(32px);
  mask-image: linear-gradient(to bottom, transparent 85%, black 100%);
  background: transparent;
}
body.balance-lock-scroll {
  overflow: hidden;
  position: fixed;
  width: 100vw;
  height: 100vh;
  overscroll-behavior: none;
}
#page-balance.active .page-inner,
#page-balance.active .content {
  position: fixed;
  top: var(--header-h);
  bottom: calc(var(--trigger-offset) + env(safe-area-inset-bottom));
  left: 0;
  right: 0;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}
#page-balance.active .page-inner::-webkit-scrollbar,
#page-balance.active .content::-webkit-scrollbar { display: none; }
.page-vignette, .page-vignette-strong, .page-vignette-extreme, .vignette-bottom {
  position: fixed !important;
  inset: 0;
  pointer-events: none !important;
  z-index: 100 !important;
  background: linear-gradient(to top, rgba(0, 0, 0, 0.30) 2%, rgba(0, 0, 0, 0.12) 18%, rgba(0, 0, 0, 0) 40%),
              linear-gradient(to bottom, rgba(0, 0, 0, 0.30) 0%, rgba(0, 0, 0, 0.12) 18%, rgba(0, 0, 0, 0) 25%),
              radial-gradient(ellipse at center, rgba(0, 0, 0, 0) 65%, rgba(0, 0, 0, 0.09) 83%, rgba(0, 0, 0, 0.17) 96%, rgba(0, 0, 0, 0.26) 100%);
}
#webgl-bg { z-index: 0; }
.page { z-index: 1; }
.vignette, .vignette-bottom, .page-vignette-container, .page-vignette {
  z-index: 9999 !important;
  pointer-events: none;
}
.blur { z-index: 10000 !important; }
.site-header, nav { z-index: 12000 !important; }
.cursor, #cursor { z-index: 13000 !important; }
body, html, #app { margin: 0; width: 100%; height: 100%; }
#app {
  overflow: hidden;
  touch-action: pan-up;
  color: #ffffff;
  font-family: "Montserrat", sans-serif;
  text-align: center;
  position: relative;
}
#app h1 {
  --fontSize: 60px;
  --lineHeight: 80px;
  width: auto;
  height: calc(2 * var(--lineHeight));
  line-height: var(--lineHeight);
  margin: calc(50vh - var(--lineHeight)) auto 0;
  font-size: var(--fontSize);
  text-transform: uppercase;
}
#app a { margin-top: 10px; display: inline-block; text-decoration: none; color: #fff; }
#app canvas { display: block; position: fixed; top: 0; }
body, html, #app { margin: 0; width: 100%; height: 100%; }
#app {
  overflow: hidden;
  touch-action: pan-up;
  color: #ffffff;
  font-family: "Montserrat", sans-serif;
  text-align: center;
  position: relative;
}
#app h1 {
  width: auto;
  margin: calc(50vh - 2em) auto 0;
  text-transform: uppercase;
}
#app a { margin-top: 10px; display: inline-block; text-decoration: none; color: #fff; }
#app canvas { display: block; position: fixed; top: 0; }
.cards-container {
  --base-rotation: 0deg;
  --full-circle: 360deg;
  --duration: 200ms;
  --radius: calc(clamp(245px, min(min((100vw - 8rem) / 2, (100vh - 8rem) / 2), 300px), 300px));
  --cards-container-size: calc(var(--radius) * 2);
  --cards-container-padding: 2rem;
  --border-color: transparent;
  --label-offset: calc(var(--radius) * -1 - 1rem);
  --label-size: 30px;
  --label-color: #eee;
  --label-color-hover: white;
  --label-line-h: 0;
  --label-line-h-current: 2rem;
  /* color: --label-dot-size:10px; --title-top:50%; --title-offset-y:0; --info-top:50%; --info-width:min(70%, 500px); --info-offset-y:0; */
  box-sizing: content-box;
  position: fixed;
  top: 50%;
  left: 50%;
  width: var(--cards-container-size);
  height: var(--cards-container-size);
  padding: var(--cards-container-padding);
  transform: translate(-50%, -50%);
  pointer-events: none;
  user-select: none;
}

@media (min-width: 800px) {
  .cards-container { --label-size: 40px; --label-dot-size: 15px; --label-line-h-current: 4rem; }
}

@media (min-width: 1200px) {
  .cards-container { --label-size: 50px; }
}

.card-info {
  position: absolute;
  left: 50%;
  top: 50%;
  width: var(--info-width);
  max-width: 90vw;
  box-sizing: border-box;
  transform: translate(-50%, -50%);
  pointer-events: none;
  user-select: none;
  opacity: var(--info-opacity, 0);
  transition: var(--duration) ease-in-out var(--info-delay, 0ms);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
.card-info h2,
.card-info p {
  position: static;
  left: auto;
  top: auto;
  transform: none;
  width: 100%;
  padding: 0 1rem;
  opacity: 1;
  transition: none;
}
.cards {
  position: absolute;
  inset: var(--cards-container-padding);
  aspect-ratio: 1;
  border-radius: 50%;
  border: 0px solid var(--border-color);
  transition: transform 0.3s ease-in-out var(--duration);
  list-style: none;
  pointer-events: none;
}
.cards li {
  position: absolute;
  inset: 0;
  margin: 0;
  padding: 0;
  transform-origin: center;
  display: grid;
  place-content: center;
  transform: rotate(calc(var(--i) * 360deg / var(--items)));
  pointer-events: none;
}
/* Updated label rule: removed the glow animation and apply a static glow effect */
.cards li > label {
  position: absolute;
  inset: 0;
  margin: auto;
  transform: translateY(var(--label-offset));
  width: var(--label-size);
  height: var(--label-size);
  cursor: pointer;
  pointer-events: initial;
  text-align: center;
  color: white;
  font-size: clamp(0.8rem, 2.5vw + 0.04rem, 1rem);
  transition: var(--duration) ease-in-out;
  user-select: none;
  /* Remove animation properties and set a static glow */
  animation: none;
  text-shadow: 0 0 20px #fff, 0 0 20px #614ad3;
  opacity: 0.5;
}
.cards li > label:hover {
  opacity: 1;
}
li:has(input:checked) > label {
  opacity: 1;
  font-weight: bold;
  text-shadow: 0 0 25px #fff, 0 0 25px #614ad3;
}
.cards li > label::before {
  content: "";
  position: absolute;
  top: var(--cards-container-padding);
  left: 50%;
  transform: translateX(-50%);
  width: var(--label-dot-size);
  height: var(--label-dot-size);
  aspect-ratio: 1 / 1;
  border-radius: 50%;
  background-color: var(--label-color);
  transition: background-color var(--duration) ease-in-out;
}
.cards li > label::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translate(-50%, 5px);
  width: 2px;
  height: var(--label-line-h);
  background-color: white;
  transition: height 300ms ease-in-out var(--label-line-delay, 0ms);
}
.cards li > label:hover {
  --label-color: var(--label-color-hover);
}
.cards > li > h2 {
  position: absolute;
  left: 50%;
  top: 36%;
  transform: translateX(-50%);
  width: var(--info-width);
  max-width: 90vw;
  box-sizing: border-box;
  padding: 0 1rem;
  pointer-events: none;
  user-select: none;
  opacity: var(--title-opacity, 0);
  transition: var(--duration) ease-in-out var(--title-delay, 0ms);
  
}
.cards > li > p {
  position: absolute;
  left: 50%;
  top: 44%;
  transform: translateX(-50%);
  width: var(--info-width);
  max-width: 100vw;
  box-sizing: border-box;
  padding: 0 1rem;
  pointer-events: none;
  user-select: none;
  opacity: var(--info-opacity, 0);
  transition: var(--duration) ease-in-out var(--info-delay, 0ms);
}
input[type="radio"] {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}
li:has(input:checked) {
  --label-opacity: 1;
  --label-color: var(--label-color-hover);
  --label-line-h: var(--label-line-h-current);
  --label-line-delay: calc(var(--duration) * 2);
  --title-opacity: 1;
  --title-offset-y: 0;
  --title-delay: calc(var(--duration) * 3);
  --info-opacity: 1;
  --info-offset-y: 0;
  --info-delay: calc(var(--duration) * 4);
}
.cards:has(input:checked) {
  transform: rotate(calc(var(--base-rotation) - (var(--index) * var(--full-circle) / var(--items))));
}
.cards:has(li:nth-child(1) > input:checked) { --index: 0; }
.cards:has(li:nth-child(2) > input:checked) { --index: 1; }
.cards:has(li:nth-child(3) > input:checked) { --index: 2; }
.cards:has(li:nth-child(4) > input:checked) { --index: 3; }
.cards:has(li:nth-child(5) > input:checked) { --index: 4; }
.cards:has(li:nth-child(6) > input:checked) { --index: 5; }
.cards:has(li:nth-child(7) > input:checked) { --index: 6; }
.cards:has(li:nth-child(8) > input:checked) { --index: 7; }
.cards:has(li:nth-child(9) > input:checked) { --index: 8; }
.cards:has(li:nth-child(10) > input:checked) { --index: 9; }
.cards:has(li:nth-child(11) > input:checked) { --index: 10; }
.cards:has(li:nth-child(12) > input:checked) { --index: 11; }
.cards:has(li:nth-child(13) > input:checked) { --index: 12; }
.cards:has(li:nth-child(14) > input:checked) { --index: 13; }
.cards:has(li:nth-child(15) > input:checked) { --index: 14; }
.cards:has(li:nth-child(16) > input:checked) { --index: 15; }
.cards:has(li:nth-child(17) > input:checked) { --index: 16; }
.cards:has(li:nth-child(18) > input:checked) { --index: 17; }
.cards:has(li:nth-child(19) > input:checked) { --index: 18; }
.cards:has(li:nth-child(20) > input:checked) { --index: 19; }
.cards:has(li:nth-child(21) > input:checked) { --index: 20; }
.cards:has(li:nth-child(22) > input:checked) { --index: 21; }
.cards:has(li:nth-child(23) > input:checked) { --index: 22; }
.cards:has(li:nth-child(24) > input:checked) { --index: 23; }
.cards:has(li:nth-child(25) > input:checked) { --index: 24; }
.cards:has(li:nth-child(26) > input:checked) { --index: 25; }

@import url("https://unpkg.com/normalize.css") layer(normalize);
@layer normalize, base, demo, scroll, popover;
/* ...[unchanged rules above]... */

/* --- CONNECT PAGE (CORRECTED) --- */
.connect-container {
  margin: 3em auto 0 auto;
  width: auto;
  max-width: 98vw;
  min-height: 200px;
  padding-top: 4em;
  background: transparent;
  border-radius: 20px;
  box-shadow: none;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 10000;
  overflow: visible;
}

.mast {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 100%;
  position: relative;
}

.mast__bg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  background-size: cover;
  background-position: center;
  pointer-events: none;
}

.mast__header {
  position: relative;
  z-index: 7654321;
  width: 100%;
  padding: 0;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

.mast__headings {
  display: flex;
  gap: 1.7em;
  justify-content: center;
  align-items: flex-end;
  width: 100%;
  flex-wrap: wrap;
}

.mast__title, .mast__title.js-spanize {
  font-size: 1.8em;
  line-height: 1.05;
  font-weight: 400;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: #fff;
  opacity: 0.96;
  margin-bottom: 1.66em;
  background: transparent !important;
  cursor: pointer;
  text-align: left;
  user-select: none;
  max-width: 100%;
  transition: opacity 0.2s, color 0.2s, text-shadow 0.2s, font-weight 0.2s;
  box-shadow: none;
  border-radius: 0;
  position: relative;
}

.mast__title.js-spanize { letter-spacing: 0.35em; font-weight: 600; }

.mast__header h2.active,
.mast__header h2:hover,
.mast__header h2:focus,
h2.active, h2:hover, h2:focus {
  color: #fff;
  opacity: 1;
  font-weight: 800;
  text-shadow: 0 0 10px #fff, 0 0 24px #fff, 0 0 2px #fff;
}

@keyframes connect-letter-glow {
  0% { opacity: 0; text-shadow: 0px 0px 1px rgba(255, 255, 255, 0.04); }
  66% { opacity: 1; text-shadow: 0px 0px 16px rgba(255, 255, 255, 0.7); }
  77% { opacity: 1; }
  100% { opacity: 0.7; text-shadow: 0px 0px 8px rgba(255, 255, 255, 0); }
}

.mast__title span, h1 span { animation: connect-letter-glow 0.7s 0s ease both; }

.sep, .mast-sep {
  border: 0;
  width: 3em;
  height: 1px;
  margin: 0 0 0 0;
  background: transparent !important;
}

/* --- CORRECTED .mast__texts and .mast__text --- */
.mast__texts {
  width: 100%;
  max-width: 100%;
  min-width: 340px;
  margin: 0;
  display: flex;
  flex-direction: column;
  align-items: flex-start; /* left-align children */
  position: relative;
  z-index: 10;
}

.mast__text {
  font-size: 0.9em;
  font-weight: 200;
  margin: 1.2em 0 0.2em 0;
  letter-spacing: 0.4em;
  line-height: 1.6;
  color: #eee;
  background: transparent !important;
  display: none;
  text-align: left; /* Left align text */
  max-width: 100%;
  position: relative;
  z-index: 10;
}

.mast__text.active { display: block; }
.mast__text span { animation: connect-letter-glow 0.7s 0s ease both; }

h1, .mast__title, .mast__title.js-spanize {
  font-size: 2.8em;
  line-height: 1.05;
  font-weight: 400;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: #fff;
  opacity: 0.65;
  margin-bottom: 0.1em;
  background: transparent !important;
  cursor: pointer;
  text-align: left;
  user-select: none;
  max-width: 100%;
  overflow-wrap: break-word;
  white-space: normal;
  transition: opacity 0.2s, color 0.2s, text-shadow 0.2s, font-weight 0.2s;
  box-shadow: none;
  border-radius: 0;
  position: relative;
  z-index: 10;
}

.h1.active, h1:hover, h1:focus,
.mast__title.active, .mast__title:hover, .mast__title:focus {
  color: #fff;
  opacity: 0.99;
  font-weight: 800;
  text-shadow: 0 0 10px #fff, 0 0 24px #fff, 0 0 2px #fff;
}

/* --- END CORRECTED --- */

/* --- MEDIA QUERIES (unchanged) --- */
@media (max-width: 1400px) {
  .connect-container { width: 95vw; max-width: 1200px; }
  .mast__texts { max-width: 95vw; }
}

@media (max-width: 1100px) {
  .connect-container { width: 98vw; max-width: 1100px; }
  .mast__texts { max-width: 98vw; }
}

@media (max-width: 900px) {
  .connect-container { width: 99vw; max-width: 900px; padding: 4em; margin-top: 2em; }
  .mast__texts { max-width: 99vw; }
  .mast__title, .mast__title.js-spanize { font-size: 2.9em; margin-bottom: 0.1em; }
  .mast__text { font-size: 0.9em; letter-spacing: 0.2em; }
  .mast { display: flex; flex-direction: column; justify-content: center; align-items: center; width: 100%; position: relative; }
  .mast__bg { position: absolute; inset: 0; width: 100%; height: 100%; z-index: 1; background-size: cover; background-position: center; pointer-events: none; }
}

@media (max-width: 600px) {
  .connect-container { width: 100vw; min-width: unset; min-height: unset; margin: 2em auto 0 auto; padding: 7em; max-width: 100vw; }
  .mast__texts { min-width: unset; max-width: 100vw; margin: 0; }
  .life-paragraph { font-size: 1em; margin-bottom: 0.8em; line-height: 1.45; padding-left: 0.3em; padding-right: 0.3em; }
  .balance-paragraph { font-size: 0.98em; margin-bottom: 0.45em; line-height: 1.25; padding-left: 0.3em; padding-right: 0.3em; }
  .mast__headings { gap: 0.7em; }
  .mast__title, .mast__title.js-spanize { font-size: 2.4em; margin-bottom: 0.1em; }
  .sep, .mast-sep { width: 2em; margin: 0.2em 0 0.5em 0; }
  .mast__text { font-size: 0.90em; letter-spacing: 0.2em; line-height: 1.7; margin-bottom: 0; }
  .mast { display: flex; flex-direction: column; justify-content: center; align-items: center; width: 100%; position: relative; }
  .mast__bg { position: absolute; inset: 0; width: 100%; height: 100%; z-index: 1; background-size: cover; background-position: center; pointer-events: none; }
  .mast__header h2,{ width: 100%; text-align: left; display: flex; justify-content: left; align-items: left; }
}

@media (max-width: 400px) {
  .connect-container { padding: 12em; }
  .mast__texts { max-width: 100vw; }
  .mast__title, .mast__title.js-spanize { font-size: 1.8em; letter-spacing: 0.09em; margin-bottom: 0.1em; }
  .mast__text { font-size: 0.88em; letter-spacing: 0.2em; line-height: 1.7; }
  .mast { display: flex; flex-direction: column; justify-content: left; align-items: left; width: 100%; position: relative; }
  .mast__bg { position: absolute; inset: 0; width: 100%; height: 100%; z-index: 1; background-size: left; background-position: left; pointer-events: none; }
}


.zackgort-footer {
  position: fixed;
  bottom: 0;
  padding-bottom: 2rem;
  width: 100%;
  display: flex;
  justify-content: center;
  z-index: 9999;
  background-color: transparent;
  pointer-events: none;
}
.zackgort-paragraph {
  position: relative;
  /* font-family removed for Poppins canonical inheritance */
  text-transform: uppercase;
  font-size: 0.92em;
  letter-spacing: 0.2em;
  overflow: hidden;
  white-space: normal;
  background: linear-gradient(90deg, #000, #fff, #000);
  background-repeat: no-repeat;
  background-size: 80%;
  animation: zackgort-animate 8s linear infinite;
  -webkit-background-clip: text;
  -webkit-text-fill-color: rgba(255, 255, 255, 0);
}

@keyframes zackgort-animate {
  0% { background-position: -500%; }
  100% { background-position: 500%; }
}

.project-title {
  position: relative;
  /* font-family removed for Poppins canonical inheritance */
  text-transform: uppercase;
  font-size: 1.4em;
  letter-spacing: 0.05em;
  overflow: hidden;
}
.project-year {
  position: relative;
  /* font-family removed for Poppins canonical inheritance */
  text-transform: camel-case;
  font-size: 0.92em;
  letter-spacing: 0.05em;
  overflow: hidden;
  white-space: normal;
}




    /* Glassy Button styles */
    .glassy-button, .glassy-button * {
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
      user-select: none;
      touch-action: manipulation;
      font-family: "Inter", sans-serif;
    }
    .glassy-button-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      width: 100%;
      padding-top: var(--glassy-button-container-top, 8em);
      box-sizing: border-box;
    }
    .glassy-button-wrap {
      position: relative;
      z-index: 2;
      border-radius: 999vw;
      background: transparent;
      pointer-events: none;
      transition: all var(--anim--hover-time) var(--anim--hover-ease);
    }
    .glassy-button-shadow {
      --shadow-cuttoff-fix: 2em;
      position: absolute;
      width: calc(100% + var(--shadow-cuttoff-fix));
      height: calc(100% + var(--shadow-cuttoff-fix));
      top: calc(0% - var(--shadow-cuttoff-fix) / 2);
      left: calc(0% - var(--shadow-cuttoff-fix) / 2);
      filter: blur(clamp(2px, 0.125em, 12px));
      -webkit-filter: blur(clamp(2px, 0.125em, 12px));
      -moz-filter: blur(clamp(2px, 0.125em, 12px));
      -ms-filter: blur(clamp(2px, 0.125em, 12px));
      overflow: visible;
      pointer-events: none;
    }
    .glassy-button-shadow::after {
      content: "";
      position: absolute;
      z-index: 0;
      inset: 0;
      border-radius: 999vw;
      background: linear-gradient(180deg, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.1));
      width: calc(100% - var(--shadow-cuttoff-fix) - 0.25em);
      height: calc(100% - var(--shadow-cuttoff-fix) - 0.25em);
      top: calc(var(--shadow-cuttoff-fix) - 0.5em);
      left: calc(var(--shadow-cuttoff-fix) - 0.875em);
      padding: 0.125em;
      box-sizing: border-box;
      mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      mask-composite: exclude;
      transition: all var(--anim--hover-time) var(--anim--hover-ease);
      overflow: visible;
      opacity: 1;
    }
    .glassy-button {
      --border-width: clamp(1px, 0.0625em, 4px);
      all: unset;
      cursor: pointer;
      position: relative;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      pointer-events: auto;
      z-index: 3;
      background: linear-gradient(-75deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.05));
      border-radius: 999vw;
      box-shadow: inset 0 0.125em 0.125em rgba(0, 0, 0, 0.05),
                  inset 0 -0.125em 0.125em rgba(255, 255, 255, 0.5),
                  0 0.25em 0.125em -0.125em rgba(0, 0, 0, 0.2),
                  0 0 0.1em 0.25em inset rgba(255, 255, 255, 0.2),
                  0 0 0 0 rgba(255, 255, 255, 1);
      backdrop-filter: blur(clamp(1px, 0.125em, 4px));
      -webkit-backdrop-filter: blur(clamp(1px, 0.125em, 4px));
      -moz-backdrop-filter: blur(clamp(1px, 0.125em, 4px));
      -ms-backdrop-filter: blur(clamp(1px, 0.125em, 4px));
      transition: all var(--anim--hover-time) var(--anim--hover-ease);
    }
    .glassy-button:hover {
      transform: scale(0.975);
      backdrop-filter: blur(0.01em);
      -webkit-backdrop-filter: blur(0.01em);
      -moz-backdrop-filter: blur(0.01em);
      -ms-backdrop-filter: blur(0.01em);
      box-shadow: inset 0 0.125em 0.125em rgba(0, 0, 0, 0.05),
                  inset 0 -0.125em 0.125em rgba(255, 255, 255, 0.5),
                  0 0.15em 0.05em -0.1em rgba(0, 0, 0, 0.25),
                  0 0 0.05em 0.1em inset rgba(255, 255, 255, 0.5),
                  0 0 0 0 rgba(255, 255, 255, 1);
    }
    .glassy-button span {
      position: relative;
      display: block;
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      font-family: "Inter", sans-serif;
      letter-spacing: -0.05em;
      font-weight: 500;
      font-size: 1em;
      color: rgba(50, 50, 50, 1);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-shadow: 0 0.25em 0.05em rgba(0, 0, 0, 0.1);
      transition: all var(--anim--hover-time) var(--anim--hover-ease);
      padding-inline: 1.5em;
      padding-block: 0.875em;
    }
    .glassy-button:hover span { 
      text-shadow: 0.025em 0.025em 0.025em rgba(0, 0, 0, 0.12); 
    }
    .glassy-button span::after {
      content: "";
      display: block;
      position: absolute;
      z-index: 1;
      width: calc(100% - var(--border-width));
      height: calc(100% - var(--border-width));
      top: calc(0% + var(--border-width)/2);
      left: calc(0% + var(--border-width)/2);
      box-sizing: border-box;
      border-radius: 999vw;
      overflow: clip;
      background: linear-gradient(var(--angle-2), rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.5) 40% 50%, rgba(255, 255, 255, 0) 55%);
      z-index: 3;
      mix-blend-mode: screen;
      pointer-events: none;
      background-size: 200% 200%;
      background-position: 0% 50%;
      background-repeat: no-repeat;
      transition: background-position calc(var(--anim--hover-time)*1.25) var(--anim--hover-ease), --angle-2 calc(var(--anim--hover-time)*1.25) var(--anim--hover-ease);
    }
    .glassy-button:hover span::after { 
      background-position: 25% 50%; 
    }
    .glassy-button:active span::after { 
      background-position: 50% 15%; 
      --angle-2: -15deg; 
    }
    @media (hover: none) and (pointer: coarse) {
      .glassy-button span::after,
      .glassy-button:active span::after { 
        --angle-2: -45deg; 
      }
    }
    .glassy-button::after {
      content: "";
      position: absolute;
      z-index: 1;
      inset: 0;
      border-radius: 999vw;
      width: calc(100% + var(--border-width));
      height: calc(100% + var(--border-width));
      top: calc(0% - var(--border-width)/2);
      left: calc(0% - var(--border-width)/2);
      padding: var(--border-width);
      box-sizing: border-box;
      background: conic-gradient(from var(--angle-1) at 50% 50%, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0) 5% 40%, rgba(0, 0, 0, 0.5) 50%, rgba(0, 0, 0, 0) 60% 95%, rgba(0, 0, 0, 0.5)),
                  linear-gradient(180deg, rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5));
      mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      mask-composite: exclude;
      transition: all var(--anim--hover-time) var(--anim--hover-ease), --angle-1 500ms ease;
      box-shadow: inset 0 0 0 calc(var(--border-width)/2) rgba(255, 255, 255, 0.5);
    }
    .glassy-button:hover::after { 
      --angle-1: -125deg; 
    }
    .glassy-button:active::after { 
      --angle-1: -75deg; 
    }
    @media (hover: none) and (pointer: coarse) {
      .glassy-button::after,
      .glassy-button:hover::after,
      .glassy-button:active::after { 
        --angle-1: -75deg; 
      }
    }
    .glassy-button-wrap:has(.glassy-button:hover) .glassy-button-shadow {
      filter: blur(clamp(2px, 0.0625em, 6px));
      -webkit-filter: blur(clamp(2px, 0.0625em, 6px));
      -moz-filter: blur(clamp(2px, 0.0625em, 6px));
      -ms-filter: blur(clamp(2px, 0.0625em, 6px));
      transition: filter var(--anim--hover-time) var(--anim--hover-ease);
    }
    .glassy-button-wrap:has(.glassy-button:hover) .glassy-button-shadow::after {
      top: calc(var(--shadow-cuttoff-fix) - 0.875em);
      opacity: 1;
    }
    .glassy-button-wrap:has(.glassy-button:active) { 
      transform: rotate3d(1, 0, 0, 25deg); 
    }
    .glassy-button-wrap:has(.glassy-button:active) .glassy-button {
      box-shadow: inset 0 0.125em 0.125em rgba(0, 0, 0, 0.05),
                  inset 0 -0.125em 0.125em rgba(255, 255, 255, 0.5),
                  0 0.1em 0.25em 0.25em rgba(255, 255, 255, 0.2),
                  0 0 0 0 rgba(255, 255, 255, 1);
    }
    .glassy-button-wrap:has(.glassy-button:active) .glassy-button-shadow {
      filter: blur(clamp(2px, 0.125em, 12px));
      -webkit-filter: blur(clamp(2px, 0.125em, 12px));
      -moz-filter: blur(clamp(2px, 0.125em, 12px));
      -ms-filter: blur(clamp(2px, 0.125em, 12px));
    }
    .glassy-button-wrap:has(.glassy-button:active) .glassy-button-shadow::after {
      top: calc(var(--shadow-cuttoff-fix) - 0.5em);
      opacity: 0.75;
    }
    .glassy-button-wrap:has(.glassy-button:active) span {
      text-shadow: 0.025em 0.25em 0.05em rgba(0, 0, 0, 0.12);
    }
/* Glassy Button Styling (unchanged except for lower positioning) */
.work-glassy-button-container {
  position: fixed;           /* Position relative to the viewport */
  bottom: 4.4rem;              /* 6rem from the bottom */
  left: 50%;                 /* Center horizontally (50% of viewport width) */
  transform: translateX(-50%);  /* Offset by half the element's width */
  z-index: 787654;              /* Ensure it appears above other elements */
  display: block;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  font-family: "Inter", sans-serif;
  letter-spacing: 0.5em;
  font-weight: 500;
  font-size: .75em;
  color: rgba(50, 50, 50, 1);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-shadow: 0 0.25em 0.05em rgba(0, 0, 0, 0.1);
  transition: all var(--anim--hover-time) var(--anim--hover-ease);
  padding-inline: 1.5em;
  padding-block: 0.875em;
}

@media only screen and (max-width: 600px) {
  .project-title { font-size: 1em; letter-spacing: 0.01em; }
  .project-year {
    font-size: 0.8em;
    letter-spacing: 0.01em;
    nav {
      position: relative;
      display: flex;
      align-items: left;
      width: fit-content;
      margin: 0 0 0 auto;
      border-radius: 100px;
      background: hsla(0, 0%, 100%, 0.05);
      border: 0.5px solid rgba(255, 255, 255, 0.35);
      box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.02),
                  0 1.5px 8px 0 rgba(255, 255, 255, 0.06) inset;
      backdrop-filter: blur(0px) saturate(80%);
      -webkit-backdrop-filter: blur(0px) saturate(80%);
      transition: all 0.3s ease;
      pointer-events: auto;
      z-index: 200;
    }
  }
}

* { -webkit-tap-highlight-color: transparent; }
body { user-select: none; -webkit-user-select: none; -ms-user-select: none; }
h2::before, label::before, .sr-only::before { content: "" !important; }
#page-life.active .page-inner {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

body { background: #000 !important; }

/* Prevent body scrolling */
body { overflow: hidden; }

/* Allow inner scrolling within a container */
.scrollable-inner {
  overflow-y: auto;    /* Enable vertical scroll if content overflows */
  height: 400px;       /* Set a fixed height (or use other means) */
  /* Optionally, add additional styling */
  padding: 16px;
  border: 1px solid #ccc;
}


.instruction {
  position: fixed;
  left: 1.5rem;
  bottom: 1.5rem;
  font-family: 'Gloria Hallelujah', cursive;
  color: color-mix(in lch, canvas, canvasText 80%);
  z-index: 9999999;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 0.5em;
  font-size: clamp(0.8rem, 1.8vw, 1.4rem);
  opacity: 0;
  pointer-events: none;
  transition: opacity 1.6s;
}

.instruction svg {
  margin-left: 40px;
  width: 80px;
  height: auto;
  display: block;
}

.instruction span {
  margin-top: 0.3em;
  rotate: 8deg;
  font-size: clamp(0.8rem, 1.1vw, 1.1rem);
}

@media (max-width: 600px) {
  .instruction {
    font-size: clamp(0.7rem, 1.3vw, 1.1rem);
    left: 0.75rem;
    bottom: 0.75rem;
  }
  .instruction svg {
    width: 56px;
    margin-left: 22px;
  }
  .instruction span {
    font-size: clamp(0.7rem, 0.9vw, 0.95rem);
  }
}



#page-balance h2 {
  font-size: 1.8em;
  font-weight: 400;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: #fff;
  font-family: 'Poppins', Helvetica, Arial, sans-serif;
}

#page-balance p {
  margin-top: 1em;
  font-size: 0.8em;
  font-weight: 200;
  line-height: 1.7em;  
  letter-spacing: 0.2em;
  text-align: left;
  color: #eee;
  font-family: 'Poppins', Helvetica, Arial, sans-serif;
}

@media (max-width: 600px) {
  #page-balance h2 {
    font-size: 1.0em;
    letter-spacing: 0.09em;
  }
  #page-balance p {
    font-size: 0.75em;
    letter-spacing: 0.1em;
  }
}
  </style>
</head>
<body>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <link rel="canonical" href="https://codepen.io/zackgort/pen/jEPXaRP" />

  <!-- Stylesheets -->
  <link rel="stylesheet" href="styles.css" />
  
  <!-- Poppins Google Fonts (for standardized typography) -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap">

  <!-- External JS libraries -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dat.gui@0.7.9/build/dat.gui.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/stats.js@0.17.0/build/stats.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/split-type@0.4.0/umd/split-type.min.js"></script>

  <title>Reason & Resolution</title>
</head>
<body>

<!-- SVG FILTERS (spotlight, ambience, gooey, etc.) -->
<svg aria-hidden="true" class="sr-only">
  <!-- Nav spotlight -->
  <filter id="spotlight">
    <feGaussianBlur in="SourceAlpha" stdDeviation="0.8" result="b" />
    <feSpecularLighting
      in="b"
      surfaceScale="0.5"
      specularConstant="6"
      specularExponent="65"
      lighting-color="hsla(234,14%,72%,0.25)"
      result="l"
    >
      <fePointLight x="50" y="54" z="82" />
    </feSpecularLighting>
    <feComposite in="l" in2="SourceAlpha" operator="in" result="c" />
    <feComposite
      in="merged"
      in2="c"
      operator="arithmetic"
      k1="0"
      k2="1"
      k3="1"
      k4="0"
    />
  </filter>
  <!-- Logo spotlight -->
  <filter id="logo-spotlight">
    <feGaussianBlur in="SourceAlpha" stdDeviation="0.8" result="b" />
    <feSpecularLighting
      in="b"
      surfaceScale="0.5"
      specularConstant="6"
      specularExponent="65"
      lighting-color="hsla(234,14%,72%,0.25)"
      result="l"
    >
      <fePointLight id="logoLight" x="0" y="0" z="82" />
    </feSpecularLighting>
    <feComposite in="l" in2="SourceAlpha" operator="in" result="c" />
    <feComposite
      in="merged"
      in2="c"
      operator="arithmetic"
      k1="0"
      k2="1"
      k3="1"
      k4="0"
    />
  </filter>
  <!-- Nav ambience halo -->
  <filter id="ambience">
    <feGaussianBlur in="SourceAlpha" stdDeviation="0.8" result="b" />
    <feSpecularLighting
      in="b"
      surfaceScale="0.5"
      specularConstant="25"
      specularExponent="65"
      lighting-color="hsla(234,14%,72%,0.25)"
      result="l"
    >
      <fePointLight x="120" y="-154" z="160" />
    </feSpecularLighting>
    <feComposite in="l" in2="SourceAlpha" operator="in" result="c" />
    <feComposite
      in="merged"
      in2="c"
      operator="arithmetic"
      k1="0"
      k2="1"
      k3="1"
      k4="0"
    />
  </filter>
  <!-- Gooey filter -->
  <filter id="goo">
    <feGaussianBlur in="SourceGraphic" stdDeviation="6" result="b" />
    <feColorMatrix
      in="b"
      mode="matrix"
      values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 35 -15"
      result="g"
    />
    <feComposite in="SourceGraphic" in2="g" operator="atop" />
  </filter>
</svg>

<!-- Global WebGL Background (Three.js shader) -->
<div id="webgl-bg"></div>

<!-- Sticky header (logo + nav) -->
<header class="site-header">
  <div class="logo-wrapper" aria-label="Reason & Resolution">
    <a
      class="button float-shadow"
      href="#"
      role="button"
      aria-label="Home"
      id="home-button"
    >
      <div class="trademark-container">
        <div class="trademark-symbol"><span class="letter">R</span></div>
        <span class="superscript-symbol">&amp;</span>
      </div>
    </a>
  </div>
  <nav>
    <ul aria-hidden="true" class="lit">
      <li>Work</li>
      <li>Life</li>
      <li>Balance</li>
      <li>Connect</li>
    </ul>
    <ul class="content">
      <li><a href="#" data-page="work" data-active="true">Work</a></li>
      <li>
        <a href="#" data-page="life"><span>Life</span></a>
      </li>
      <li>
        <a href="#" data-page="balance"><span>Balance</span></a>
      </li>
      <li>
        <a href="#" data-page="connect"><span>Connect</span></a>
      </li>
    </ul>
  </nav>
</header>

<!-- Gooey cursor container -->
<div id="cursor"></div>

<div class="noise-overlay"></div>

<!-- HOME PAGE (gallery) -->
<section id="page-home" class="page">
  <div class="header"></div>
  <div class="container">

    <!-- Gallery canvas and overlays here -->
    <canvas></canvas>
    <div class="canvas" id="canvas"></div>
    <div class="overlay" id="overlay"></div>


  <div class="project-title">
    <p></p>
  </div>
</section>


    <!-- WORK PAGE -->
    <section id="page-work" class="page">
      <div id="background-image-container">
        <img id="background-image" src="background.jpg" crossorigin="anonymous" alt="" />
      </div>
      <div class="container">
        <div class="projects-container">
          <!-- Projects will be rendered here by script.js -->
        </div>

      </div>
    </section>

    <!-- LIFE PAGE (Popover UI Demo, only this version present) -->
    <section id="page-life" class="page">
      <div class="content">
        <main>
          <section id="user-centered-design" class="life-section" style="view-timeline: --one">
            <div class="heading">
              <img src="https://i.ibb.co/XLRJ0yL/IMG-20160930-105946.jpg" alt="abcd" class="section-image" />
              <h2>Hello world. I'm Zack.</h2>
              <a href="#user-centered-design">
                <span class="sr-only">Hello world. I'm Zack.</span>
              </a>
            </div>
            <p>
              Welcome! This is my site; a portfolio of sorts, but one unlike the others. So, what are we looking at?  Well, in the words of Eric Schmidt, show me, don't tell me.
            </p>
            <p>
              Put simply, the contents of my site are not to show off or showcase my work, but to share the content of my character. My hope is that you see how a creative mind sees and interacts with the world.
            </p>
          </section>
  
          <section id="responsive-layouts" class="life-section" style="view-timeline: --two">
            <div class="heading">
              <img src="https://miro.medium.com/v2/resize:fit:4096/format:webp/1*ZpyOMlmzMa0rPlNY--3KXA.png" alt="Responsive layouts across devices" class="section-image" />
              <h2>Thinker, maker, creative tinkerer.</h2>
              <a href="#responsive-layouts">
                <span class="sr-only">Thinker, maker, creative tinkerer.</span>
              </a>
            </div>
            <p>
              Image caption: What's in my head / Head-first / Headless approach (sans ego)
            </p>
            <p>
              My approach, my perspective, and my unsatiable [creative] curiosity are what define me. It isn't something that I simply turn on and off, but an innate and visceral way of living  and working.
            </p>
            <p>
              My passion for creativity extends well beyond what we see on our screens, but in finding inspiration from real-world environments and "IRL" interactions with real people.
            </p>
          </section>
  
          <section id="typography" class="life-section" style="view-timeline: --three">
            <div class="heading">
              <img src="https://i.ibb.co/Y3spCs9/I10A0969.jpg" alt="Typography sample for readability" class="section-image" />
              <h2>Functionally, a "web designer"</h2>
              <a href="#typography">
                <span class="sr-only">Functionally, a "web designer"</span>
              </a>
            </div>
            <p>
              Does anyone remember Skeuomorphic design? Twitter Bootstrap? Wireframing with InDesign?
            </p>
            <p>
              Well, Pepperidge Farm remembers. As do I. I remember when websites were designed with Photoshop. I remember receiving client design feedback through the fax machine. I remember when client presentations required we dress in our Sunday best. I remember free lunches on those days.
            </p>
            <p>
              Well, now it's about automation, productivity, and so-called ingenuity. It's no longer about what you've done, it's now about what you can do and how fast can you do it.
            </p>
          </section>
  
          <section id="color-contrast" class="life-section" style="view-timeline: --four">
            <div class="heading">
              <img src="https://miro.medium.com/v2/resize:fit:4466/format:webp/1*kY6yg0chz7Puu-WgrlYNMA.jpeg" alt="Color palette and contrast example" class="section-image" />
              <h2>Fundamentally, an artist</h2>
              <a href="#color-contrast">
                <span class="sr-only">Fundamentally, an artist</span>
              </a>
            </div>
            <p>
              So, I enjoy crafting things with my hands. While AI can certainly create visually stunning 'art', it will never know the joy of creating something from complete scratch; of pure imagination  nor the feeling of accomplishment.
            </p>
            <p>
              The human eye still matters. The human hand still matters. The human brain matters most.
            </p>
            <p>
              My true specialty, my true talent, is not in what I produce, but in how I bring it to fruition. I observe. I empathize. I walk in your shoes. I take a step back, then dive in deep. At my core, I am an observer. I am the conduit who connects creativity to the seemingly mundane. I can capture creativity from anywhere and channel it into a solution that doesn't just move the business, but feels right with its audience.
            </p>
          </section>
  
          <section id="motion-design" class="life-section" style="view-timeline: --five">
            <div class="heading">
              <img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9EZTgvxttDXOacHzI9axeQ.gif" alt="Motion and animation in web UI" class="section-image" />
              <h2>Specializing in design + data</h2>
              <a href="#motion-design">
                <span class="sr-only">Specializing in design + data</span>
              </a>
            </div>
            <p>
              So, what the **** am I? Please do pardon my French, but the answer to this question eludes me to this day.
            </p>
            <p>
              I've been called a graphic designer, a web designer, an interactive designer, a UI designer, a UX designer, and so on.
            </p>
            <p>
              Those titles make sense, but they don't tell you anything about my specializations such as: specializing in Information Architecture, Content Taxonomies, Usability & Compliance Standardizations and Optimizations, Interactive Design Systems, Wireframe Prototypes, Technical UX Writing, etc, etc.
            </p>
          </section>
  
          <section id="accessibility" class="life-section" style="view-timeline: --six">
            <div class="heading">
              <img src="https://github.com/ZACKGORT/reasonably/blob/main/tiktok-proto-gif.gif?raw=true" alt="Accessible and inclusive web UI" class="section-image" />
              <h2>Working with the A-list brands</h2>
              <a href="#accessibility">
                <span class="sr-only">Working with the A-list brands</span>
              </a>
            </div>
            <p>
              My first desk-design job was at a local design firm as an image retoucher and print brochure designer.
            </p>
            <p>
              From there, I spent several years working in start-up environments as a key individual contributor, earning millions in revenue through my efforts in e-commerce UX, email and display-ad marketing, and best-in-class product photography.
            </p>
            <p>
              Then, enter #AgencyLife, where I've had the good fortune of working with world-renowned brands which include the following: TikTok, The Philadelphia Eagles, BNY Mellon, La Colombe, General Nutrition Centers {GNC}, Aquasana, Shop Hardinge, Simpson Strong-Tie, Century 21 Fashion, Rachel Roy, Merck, YETI, Marine One, Organic Girl, Goya, Comcast, Charter, and dozens of philanthropic organizations.
            </p>
          </section>
  
          <section id="conclusion" class="life-section" style="view-timeline: --seven">
            <div class="heading">
              <img src="https://i.ibb.co/Q86g6LC/3128133825639913845-5144774570.jpg" alt="Inspiration and connection on the web" class="section-image" />
              <h2>My reason. My resolution.</h2>
              <a href="#conclusion">
                <span class="sr-only">My reason. My resolution.</span>
              </a>
            </div>
            <p>
              I have places to go, people to meet, and problems to solve.
            </p>
            <p>
              I seek nothing more than to find a place where I can contribute to the world in a meaningful way, while contributing the same to myself and those I work with.
            </p>

        <!-- Glassy Back to Top Button (SVG with Text, matches styling) -->
        <div
          class="glassy-button-container"
          id="back-to-top-life-container"
          style="position:fixed; left:50%; bottom:8rem; transform:translateX(-50%); z-index:1200;"
        >
          <div class="glassy-button-wrap">
            <div class="glassy-button-shadow"></div>
            <button
              id="back-to-top-life"
              class="glassy-button back-to-top-btn"
              type="button"
              aria-label="Back to top"
            >
              <span>
                <svg
                  width="24"
                  height="24"
                  aria-hidden="true"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  style="vertical-align:middle; margin-right:0.5em;"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 19V5M5 12l7-7 7 7"
                  />
                </svg>
                Back to Top
              </span>
            </button>
          </div>
        </div>

        <!-- Scroll spacer for extra scroll area at bottom, inside .cards-container for inner scroll -->
        <div class="scroll-spacer"></div>
      </section>
    </main>
  </div>
</section>

<!-- BALANCE PAGE -->
<section id="page-balance" class="page">
  <div class="balance-bg-cursor"></div>
  <div id="app">
    <div class="cards-container">
      <ul class="cards" style="--items: 26;">
        <li style="--i: 0;">
          <input type="radio" id="item-0" name="gallery-item" checked />
          <label for="item-0">2000</label>
          <h2>2000</h2>
          <p class="balance-paragraph">
            It all started here...
          </p>
        </li>
        <li style="--i: 1;">
          <input type="radio" id="item-1" name="gallery-item" />
          <label for="item-1">2001</label>
          <h2>2001</h2>
          <p class="balance-paragraph">
            Attended Conestoga High School. I had my choice between Carnegie Melon University, and Pratt Institute of Art.
          </p>
        </li>
        <li style="--i: 2;">
          <input type="radio" id="item-2" name="gallery-item" />
          <label for="item-2">2002</label>
          <h2>2002</h2>
          <p class="balance-paragraph">
            Frankly, Pratt offered an enticing scholarship, while I was rejected for financial aid to Carnegie.
          </p>
        </li>
        <li style="--i: 3;">
          <input type="radio" id="item-3" name="gallery-item" />
          <label for="item-3">2003</label>
          <h2>2003</h2>
          <p class="balance-paragraph">
            'Foundation Year' at Pratt  a great way to waste $38k/year.
          </p>
        </li>
        <li style="--i: 4;">
          <input type="radio" id="item-4" name="gallery-item" />
          <label for="item-4">2004</label>
          <h2>2004</h2>
          <p class="balance-paragraph">
            Sophomore year, I {finally} studied 3D Animation & Motion Graphics
          </p>
        </li>
        <li style="--i: 5;">
          <input type="radio" id="item-5" name="gallery-item" />
          <label for="item-5">2005</label>
          <h2>2005</h2>
          <p class="balance-paragraph">
            Functioned as adjunct professor in Digital Design courses 
          </p>
        </li>
        <li style="--i: 6;">
          <input type="radio" id="item-6" name="gallery-item" />
          <label for="item-6">2006</label>
          <h2>2006</h2>
          <p class="balance-paragraph">
            'Stopped-out' from Pratt due to inability to secure financial aid. So, I decided to explore and study graphic design of my own volition.
          </p>
        </li>
        <li style="--i: 7;">
          <input type="radio" id="item-7" name="gallery-item" />
          <label for="item-7">2007</label>
          <h2>2007</h2>
          <p class="balance-paragraph">
            Built up a design portfolio using a pirated copy of Adobe Photoshop and Illustrator. Worked as a design intern with a small local design firm. 
          </p>
        </li>
        <li style="--i: 8;">
          <input type="radio" id="item-8" name="gallery-item" />
          <label for="item-8">2008</label>
          <h2>2008</h2>
          <p class="balance-paragraph">
            Was hired by an e-commerce startup. The true impetus of my design career.
          </p>
        </li>
        <li style="--i: 9;">
          <input type="radio" id="item-9" name="gallery-item" />
          <label for="item-9">2009</label>
          <h2>2009</h2>
          <p class="balance-paragraph">
            Specialized in product photography, email and ads marketing, web design, and graphic design for digital and print. 
          </p>
        </li>
        <li style="--i: 10;">
          <input type="radio" id="item-10" name="gallery-item" />
          <label for="item-10">2010</label>
          <h2>2010</h2>
          <p class="balance-paragraph">
            Grew into a lead design role with a focus on e-commerce user experience. 
          </p>
        </li>
        <li style="--i: 11;">
          <input type="radio" id="item-11" name="gallery-item" />
          <label for="item-11">2011</label>
          <h2>2011</h2>
          <p class="balance-paragraph">
            Accepted a job in Philly for a digital product startup working in Lead Generation
          </p>
        </li>
        <li style="--i: 12;">
          <input type="radio" id="item-12" name="gallery-item" />
          <label for="item-12">2012</label>
          <h2>2012</h2>
          <p class="balance-paragraph">
            Learned responsive web design, usability, analytics, and funnel optimization.
          </p>
        </li>
        <li style="--i: 13;">
          <input type="radio" id="item-13" name="gallery-item" />
          <label for="item-13">2013</label>
          <h2>2013</h2>
          <p class="balance-paragraph">
            Now, having worked side-by-side with developers, I decided I needed to learn how to code.
          </p>
        </li>
        <li style="--i: 14;">
          <input type="radio" id="item-14" name="gallery-item" />
          <label for="item-14">2014</label>
          <h2>2014</h2>
          <p class="balance-paragraph">
            My efforts paid off, now capable of crafting things with html+css, I was offered a job as an interactive designer.
          </p>
        </li>
        <li style="--i: 15;">
          <input type="radio" id="item-15" name="gallery-item" />
          <label for="item-15">2015</label>
          <h2>2015</h2>
          <p class="balance-paragraph">
            #AgencyLife - Pitch Decks, POCs, SOWs, Billable Hours, Happy Hours, All-Nighters.
          </p>
        </li>
        <li style="--i: 16;">
          <input type="radio" id="item-16" name="gallery-item" />
          <label for="item-16">2016</label>
          <h2>2016</h2>
          <p class="balance-paragraph">
            Don't go chasing waterfalls.  Chase #Agile instead.
          </p>
        </li>
        <li style="--i: 17;">
          <input type="radio" id="item-17" name="gallery-item" />
          <label for="item-17">2017</label>
          <h2>2017</h2>
          <p class="balance-paragraph">
            Built my first iOS app from ground-up!  #LeanUX #MVP
          </p>
        </li>
        <li style="--i: 18;">
          <input type="radio" id="item-18" name="gallery-item" />
          <label for="item-18">2018</label>
          <h2>2018</h2>
          <p class="balance-paragraph">
            Moved into SaaS E-commerce as a UX technical writer, working closely with my developer cohorts.
          </p>
        </li>
        <li style="--i: 19;">
          <input type="radio" id="item-19" name="gallery-item" />
          <label for="item-19">2019</label>
          <h2>2019</h2>
          <p class="balance-paragraph">
            Transitioned from PHI to NYC, as part of a life-long goal to build my career in the Big Apple.
          </p>
        </li>
        <li style="--i: 20;">
          <input type="radio" id="item-20" name="gallery-item" />
          <label for="item-20">2020</label>
          <h2>2020</h2>
          <p class="balance-paragraph">
            Not just elevating my lifestyle, but my career as well, now "Manager, UX"
          </p>
        </li>
        <li style="--i: 21;">
          <input type="radio" id="item-21" name="gallery-item" />
          <label for="item-21">2021</label>
          <h2>2021</h2>
          <p class="balance-paragraph">
            2021, post-COVID, was tumultuous to say the least.
          </p>
        </li>
        <li style="--i: 22;">
          <input type="radio" id="item-22" name="gallery-item" />
          <label for="item-22">2022</label>
          <h2>2022</h2>
          <p class="balance-paragraph">
            But, I landed at the top working with one of the big 4 tech agencies.
          </p>
        </li>
        <li style="--i: 23;">
          <input type="radio" id="item-23" name="gallery-item" />
          <label for="item-23">2023</label>
          <h2>2023</h2>
          <p class="balance-paragraph">
            Product designer working on FinTech for BNY Mellon
          </p>
        </li>
        <li style="--i: 24;">
          <input type="radio" id="item-24" name="gallery-item" />
          <label for="item-24">2024</label>
          <h2>2024</h2>
          <p class="balance-paragraph">
            Been doing some soul-searching lately. I've not just been actively keeping up with AI developments, but proactively being hands-on with it.
          </p>
        </li>
        <li style="--i: 25;">
          <input type="radio" id="item-25" name="gallery-item" />
          <label for="item-25">2025</label>
          <h2>2025</h2>
          <p class="balance-paragraph">
            It all comes full-circle in the end.
          </p>
        </li>
      </ul>

      <!-- Scroll spacer for extra scroll area at bottom, inside .cards-container for inner scroll -->
      <div class="scroll-spacer"></div>
    </div>
  </div>
</section>

<!-- CONNECT PAGE -->
<section id="page-connect" class="page">
  <div class="connect-container">
    <div class="connect-content">
      <div class="connect-mast-container">
        <main>
          <section class="mast">
            <header class="mast__header">
              <div class="mast__headings">
                <h1 class="mast__title js-spanize" data-type="reason">
                  Reason
                </h1>
                <h1 class="mast__title js-spanize" data-type="and">&</h1>
                <h1 class="mast__title js-spanize" data-type="resolution">
                  Resolution
                </h1>
              </div>
              <hr class="sep" />
              <div class="mast__texts">
                <p class="mast__text js-spanize" data-type="reason">
  is the power of the mind to think,<br>
  understand, and form judgments<br>
  by a process of logic.
</p>
                <p class="mast__text js-spanize" data-type="and">
                  is not extra; it simply is. It is a catalyst for action; a
                  shift between paradigms.
                </p>
                <p class="mast__text js-spanize" data-type="resolution">
                  is a firm decision to do or not to do something, reflecting
                  determination or resolve.
                </p>
              </div>


<!-- Glassy Button with JavaScript mailto -->
<div class="glassy-button-container">
  <div class="glassy-button-wrap">
    <div class="glassy-button-shadow"></div>
    <button class="glassy-button" type="button" onclick="window.location.href='mailto:zack@reasonably.cc'">
      <span>zack@reasonably.cc</span>
    </button>
  </div>
</div>
            </header>
          </section>
        </main>
      </div>
    </div>
  </div>
</section>




<!-- Instruction overlay -->
<div class="instruction" id="gallery-instruction">
  <svg viewBox="0 0 144 141" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M129.189 0.0490494C128.744 0.119441 126.422 0.377545 124.03 0.635648C114.719 1.6446 109.23 2.4893 108.058 3.09936C107.119 3.56864 106.674 4.34295 106.674 5.44576C106.674 6.71281 107.424 7.51058 109.043 7.97986C110.403 8.37875 110.825 8.42567 118.87 9.52847C121.778 9.92736 124.288 10.3028 124.475 10.3732C124.663 10.4436 122.951 11.1006 120.676 11.8749C110.028 15.4414 100.412 20.7677 91.7339 27.9242C88.38 30.7164 81.6957 37.4271 79.2096 40.5009C73.8387 47.2116 69.6874 54.8139 66.5681 63.7302C65.9348 65.4665 65.3484 66.8978 65.2546 66.8978C65.1374 66.8978 63.7771 66.7336 62.2291 66.5693C52.9649 65.5134 43.1847 68.1649 34.1316 74.2186C24.7735 80.46 18.5349 87.7338 10.5371 101.742C2.53943 115.726 -1.0959 127.482 0.287874 135.014C0.89767 138.463 2.0469 140.035 3.97011 140.082C5.28352 140.105 5.37733 139.659 4.20465 139.049C3.05541 138.463 2.6567 137.9 2.32835 136.281C0.616228 128.021 6.24512 113.028 17.4325 96.1104C23.2725 87.241 28.362 81.9147 35.5622 77.1046C43.8649 71.5437 52.7069 69.033 61.1737 69.8308C64.9967 70.1828 64.6917 69.9247 64.1992 72.4822C62.2525 82.5013 63.8005 92.6378 67.9753 97.354C73.1116 103.079 81.9771 102 85.0027 95.2657C86.3395 92.2858 86.3864 87.7103 85.1434 83.9796C83.1498 78.0901 80.007 73.8197 75.4335 70.8163C73.8152 69.7604 70.4848 68.1883 69.875 68.1883C69.359 68.1883 69.4294 67.6487 70.2268 65.3257C72.3377 59.2486 75.457 52.7021 78.4122 48.244C83.2436 40.9232 91.4524 32.5701 99.1687 27.103C105.806 22.4102 113.241 18.5386 120.512 16.0045C123.772 14.8548 129.87 13.1889 130.081 13.3766C130.128 13.447 129.541 14.362 128.791 15.4414C124.78 21.0258 122.716 26.0706 122.388 30.998C122.224 33.7198 122.341 34.588 122.88 34.2595C122.998 34.1891 123.678 32.969 124.405 31.5611C126.281 27.8069 131.722 20.6738 139.579 11.6402C141.127 9.85697 142.652 7.86254 143.027 7.08823C144.552 4.03792 143.52 1.48035 140.377 0.471397C139.439 0.166366 138.102 0.0490408 134.584 0.0255769C132.074 -0.021351 129.635 0.00212153 129.189 0.0490494ZM137.117 4.92955C137.187 5.0234 136.718 5.63346 136.061 6.29045L134.865 7.48712L131.042 6.73627C128.931 6.33739 126.727 5.9385 126.14 5.8681C124.827 5.68039 124.123 5.32843 124.968 5.28151C125.296 5.28151 126.868 5.11725 128.486 4.953C131.3 4.64797 136.812 4.62451 137.117 4.92955ZM71.5168 72.5292C76.2075 74.899 79.4441 78.8175 81.3204 84.355C83.6189 91.1361 81.2266 96.8378 76.0433 96.8847C73.3227 96.9082 70.9773 95.2188 69.5936 92.2389C68.2802 89.4232 67.6938 86.5606 67.5765 82.1259C67.4593 78.3248 67.6 76.4242 68.2333 72.7403L68.4912 71.2856L69.359 71.5906C69.8515 71.7548 70.8132 72.1772 71.5168 72.5292Z"
      fill="currentColor"
    ></path>
  </svg>
  <span id="instruction-text">Drag me!</span>
</div>




        <!-- Glassy Button Container for the single button
        <div class="work-glassy-button-container">
          <div class="glassy-button-wrap">
            <div class="glassy-button-shadow"></div>
            <button
              class="glassy-button"
              type="button"
              onclick="window.location.href='https://reasonably.cc/resume'">
              <span>View Resume</span>
            </button>
          </div>
        </div>
 -->



<!-- Vignette overlays (global, always rendered) -->
<div class="page-vignette-container">
  <div class="page-vignette"></div>
  <div class="page-vignette-strong"></div>
  <div class="page-vignette-extreme"></div>
</div>

<!-- Vignette overlays (global, always rendered, fixed and high z-index) -->
<div class="page-vignette-container">
  <div class="page-vignette"></div>
  <div class="page-vignette-strong"></div>
  <div class="page-vignette-extreme"></div>
</div>
<!-- Global Blur overlay (always rendered) -->
<div class="global-blur"></div>

<!-- Add your audio element (ensure the sound file exists in your project) -->
<audio id="hoverSound" preload="auto">
  <source src="https://github.com/ZACKGORT/reasonably/raw/refs/heads/main/mixkit-light-button-2580.mp3" type="audio/mpeg">
</audio>

<footer class="zackgort-footer">
  <p class="zackgort-paragraph">Reason inspires. Resolution ships.</p>
</footer>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="main.js"></script>

<!-- Main JS file (Remove this if using CodePen/JSFiddle JS panel) -->
</body>
</html>

  <script>
/* jshint esversion: 6 */

// Utility debouncer function used for resize/scroll events
const debounce = (func, wait) => {
  let timeout;
  return (...args) => {
    clearTimeout(timeout);
    timeout = setTimeout(() => func(...args), wait);
  };
};

class Navigation {
  constructor(selectorNav, selectorLight, navY = 54, navZ = 82) {
    this.nav = document.querySelector(selectorNav);
    this.links = this.nav ? this.nav.querySelectorAll("a") : [];
    this.navLight = document.querySelector(selectorLight);
    this.NAV_Y = navY;
    this.NAV_Z = navZ;
    // Bind the pointer move callback so that it can be added/removed properly.
    this._pointerMoveHandler = this._pointerMoveHandler.bind(this);
    this.init();
  }

  centerX(element) {
    const navRect = this.nav.getBoundingClientRect();
    const elRect = element.getBoundingClientRect();
    return elRect.left - navRect.left + elRect.width / 2;
  }

  moveNavLight(xPos, force = false) {
    if (this.navLight) {
      // Batch attribute changes (if needed, further optimized via requestAnimationFrame if desired)
      this.navLight.setAttribute("x", xPos);
      this.navLight.setAttribute("y", this.NAV_Y);
      this.navLight.setAttribute("z", this.NAV_Z);
    }
  }

  setActivePage(id) {
    document.querySelectorAll(".page").forEach(el => el.classList.remove("active"));
    const pageEl = document.getElementById(id);
    if (pageEl) pageEl.classList.add("active");
    // Update body classes with minimal DOM manipulation
    const bodyClasses = document.body.className.split(" ").filter(c => !c.endsWith("-active"));
    document.body.className = bodyClasses.join(" ");
    document.body.classList.add(`${id.replace("page-", "")}-active`);
  }

  _pointerMoveHandler(event) {
    const navRect = this.nav.getBoundingClientRect();
    this.moveNavLight(event.clientX - navRect.left);
  }

  attachEvents(callback) {
    // Pre-bind the click callback for links to avoid creating a new function for every click
    this.links.forEach(link => {
      link.addEventListener("click", (e) => {
        e.preventDefault();
        this.links.forEach(l => l.removeAttribute("data-active"));
        link.setAttribute("data-active", "true");
        this.setActivePage(`page-${link.dataset.page}`);
        this.moveNavLight(this.centerX(link));
        if (typeof callback === "function") callback();
      });
    });

    // Use passive listeners where we only read the pointer event info
    this.nav.addEventListener("pointerenter", () => {
      this.nav.addEventListener("pointermove", this._pointerMoveHandler, { passive: true });
    });

    this.nav.addEventListener("pointerleave", () => {
      this.nav.removeEventListener("pointermove", this._pointerMoveHandler);
      // Recenter on the active link (cache the active link query)
      const activeLink = this.nav.querySelector("[data-active='true']");
      if (activeLink) {
        this.moveNavLight(this.centerX(activeLink));
      }
    });
  }

  resizeLogoCenter(resizeCallback) {
    window.addEventListener("resize", debounce(() => {
      const activeLink = this.nav.querySelector("[data-active='true']");
      if (activeLink) {
        this.moveNavLight(this.centerX(activeLink), true);
      }
      if (typeof resizeCallback === "function") resizeCallback();
    }, 50));
  }

  init() {
    if (this.nav) {
      const activeLink = this.nav.querySelector("[data-active='true']");
      if (activeLink) {
        this.moveNavLight(this.centerX(activeLink), true);
      }
    }
  }
}

class LogoSpotlight {
  constructor(selectorWrap, lightId) {
    this.logoWrap = document.querySelector(selectorWrap);
    this.logoLight = document.getElementById(lightId);
    // Bind callbacks for event handling
    this.centreLogo = this.centreLogo.bind(this);
    this.trackLogo = this.trackLogo.bind(this);
    this.attachEvents();
    this.centreLogo();
  }

  centreLogo() {
    if (!this.logoWrap || !this.logoLight) return;
    const rect = this.logoWrap.getBoundingClientRect();
    this.logoLight.setAttribute("x", rect.width / 2);
    this.logoLight.setAttribute("y", rect.height / 2);
  }

  trackLogo(event) {
    if (!this.logoWrap || !this.logoLight) return;
    const rect = this.logoWrap.getBoundingClientRect();
    this.logoLight.setAttribute("x", event.clientX - rect.left);
    this.logoLight.setAttribute("y", event.clientY - rect.top);
  }

  attachEvents() {
    if (this.logoWrap) {
      this.logoWrap.addEventListener("pointerenter", this.trackLogo, { passive: true });
      this.logoWrap.addEventListener("pointermove", this.trackLogo, { passive: true });
      this.logoWrap.addEventListener("pointerleave", this.centreLogo);
    }
  }
}

class GooeyCursor {
  constructor(cursorId, tailCount = 16) {
    this.cursor = document.getElementById(cursorId);
    this.TAIL = tailCount;
    this.cx = window.innerWidth / 2;
    this.cy = window.innerHeight / 2;
    this.history = Array.from({ length: this.TAIL }, () => ({ x: this.cx, y: this.cy }));
    this.gooLoopStarted = false;
    this.gooLoop = this.gooLoop.bind(this);
    this.init();
  }

  init() {
    if (this.cursor) {
      if (this.cursor.children.length < this.TAIL) {
        for (let i = 0; i < this.TAIL; i++) {
          const div = document.createElement("div");
          div.className = "cursor-circle";
          div.style.willChange = "transform";
          this.cursor.appendChild(div);
        }
      }
      this.dots = Array.from(this.cursor.children);
      window.addEventListener("pointermove", (e) => {
        this.cx = e.clientX;
        this.cy = e.clientY;
      }, { passive: true });
      window.addEventListener("touchmove", (e) => {
        const touch = e.touches[0];
        this.cx = touch.clientX;
        this.cy = touch.clientY;
      }, { passive: true });
      if (!this.gooLoopStarted) {
        this.gooLoopStarted = true;
        this.gooLoop();
      }
    }
  }

  gooLoop() {
    this.history[0].x += 0.5 * (this.cx - this.history[0].x);
    this.history[0].y += 0.5 * (this.cy - this.history[0].y);
    for (let i = 1; i < this.TAIL; i++) {
      this.history[i].x += 0.3 * (this.history[i - 1].x - this.history[i].x);
      this.history[i].y += 0.3 * (this.history[i - 1].y - this.history[i].y);
    }
    for (let i = 0; i < this.TAIL; i++) {
      const scale = 0.7 * (1 - i / this.TAIL) + 0.1;
      this.dots[i].style.transform = `translate3d(${this.history[i].x}px, ${this.history[i].y}px, 0) scale(${scale})`;
      this.dots[i].style.opacity = 1 - i / this.TAIL;
    }
    requestAnimationFrame(this.gooLoop);
  }
}

class HomeGallery {
  constructor({ items, imageUrls, settings, containerSelector, canvasSelector }) {
    this.items = this.shuffleArray(items);
    this.imageUrls = this.shuffleArray(imageUrls);
    this.settings = settings;
    this.container = document.querySelector(containerSelector);
    this.canvas = document.getElementById(canvasSelector);
    this.visibleItems = new Set();
    this.isDragging = false;
    this.startX = 0;
    this.startY = 0;
    this.targetX = 0;
    this.targetY = 0;
    this.currentX = 0;
    this.currentY = 0;
    this.dragVelocityX = 0;
    this.dragVelocityY = 0;
    this.lastDragTime = 0;
    this.mouseHasMoved = false;
    this.columns = 4;
    this.itemCount = this.items.length;
    this.cellWidth = this.settings.baseWidth + this.settings.itemGap;
    this.cellHeight = Math.max(this.settings.smallHeight, this.settings.largeHeight) + this.settings.itemGap;
    this.init();
  }

  shuffleArray(arr) {
    let currentIndex = arr.length, temporaryValue, randomIndex;
    while (currentIndex !== 0) {
      randomIndex = Math.floor(Math.random() * currentIndex);
      currentIndex -= 1;
      temporaryValue = arr[currentIndex];
      arr[currentIndex] = arr[randomIndex];
      arr[randomIndex] = temporaryValue;
    }
    return arr;
  }

  getItemId(col, row) {
    return `${col},${row}`;
  }

  getItemSize(row, col) {
    const sizes = [
      { width: this.settings.baseWidth, height: this.settings.smallHeight },
      { width: this.settings.baseWidth, height: this.settings.largeHeight }
    ];
    return sizes[Math.abs((row * this.columns + col) % sizes.length)];
  }

  getItemPosition(col, row) {
    return { x: col * this.cellWidth, y: row * this.cellHeight };
  }

  updateVisibleItems() {
    const buffer = this.settings.bufferZone;
    const eWidth = window.innerWidth * (1 + buffer);
    const eHeight = window.innerHeight * (1 + buffer);
    const s = Math.floor((-this.currentX - eWidth / 2) / this.cellWidth);
    const n = Math.ceil((-this.currentX + 1.5 * eWidth) / this.cellWidth);
    const a = Math.floor((-this.currentY - eHeight / 2) / this.cellHeight);
    const o = Math.ceil((-this.currentY + 1.5 * eHeight) / this.cellHeight);
    const newVisible = new Set();
    const placedCandidates = [];
    const minSpacing = window.matchMedia("(max-width: 600px)").matches ? 5 : 4;

    for (let row = a; row <= o; row++) {
      for (let col = s; col <= n; col++) {
        const itemId = this.getItemId(col, row);
        newVisible.add(itemId);
        if (this.visibleItems.has(itemId)) continue;
        const size = this.getItemSize(row, col);
        const pos = this.getItemPosition(col, row);
        let candidate = Math.abs((row * this.columns + col) % this.itemCount) % this.imageUrls.length;
        let attempts = 0;
        while (attempts < this.imageUrls.length) {
          let conflict = false;
          for (let placed of placedCandidates) {
            const dCol = col - placed.col;
            const dRow = row - placed.row;
            if (Math.sqrt(dCol * dCol + dRow * dRow) <= minSpacing && candidate === placed.candidate) {
              conflict = true;
              break;
            }
          }
          if (!conflict) break;
          candidate = (candidate + 1) % this.imageUrls.length;
          attempts++;
        }
        placedCandidates.push({ col, row, candidate });
        const itemElem = document.createElement("div");
        itemElem.className = "item";
        itemElem.id = itemId;
        itemElem.style.cssText = `width: ${size.width}px;
          height: ${size.height}px;
          left: ${pos.x}px;
          top: ${pos.y}px;
          position: absolute;
          will-change: transform;`;
        itemElem.dataset.col = col;
        itemElem.dataset.row = row;
        const imgContainer = document.createElement("div");
        imgContainer.className = "item-image-container";
        const imgElem = document.createElement("img");
        imgElem.src = this.imageUrls[candidate];
        imgElem.alt = `Image ${candidate + 1}`;
        imgElem.loading = "lazy";
        imgContainer.appendChild(imgElem);
        itemElem.appendChild(imgContainer);
        const caption = document.createElement("div");
        caption.className = "item-caption";
        const nameDiv = document.createElement("div");
        nameDiv.className = "item-name";
        nameDiv.textContent = this.items[candidate];
        caption.appendChild(nameDiv);
        const numberDiv = document.createElement("div");
        numberDiv.className = "item-number";
        numberDiv.textContent = `#${(candidate + 1).toString().padStart(5, "0")}`;
        caption.appendChild(numberDiv);
        itemElem.appendChild(caption);
        this.canvas.appendChild(itemElem);
        this.visibleItems.add(itemId);
      }
    }
    this.visibleItems.forEach(itemId => {
      if (!newVisible.has(itemId)) {
        const elem = document.getElementById(itemId);
        if (elem && elem.parentNode === this.canvas) {
          this.canvas.removeChild(elem);
        }
        this.visibleItems.delete(itemId);
      }
    });
  }

  animate() {
    const ease = this.settings.dragEase;
    this.currentX += (this.targetX - this.currentX) * ease;
    this.currentY += (this.targetY - this.currentY) * ease;
    this.canvas.style.transform = `translate3d(${this.currentX}px, ${this.currentY}px, 0)`;
    this.updateVisibleItems();
    requestAnimationFrame(this.animate.bind(this));
  }

  attachDragEvents() {
    if (this.container) {
      this.container.addEventListener("mousedown", (e) => {
        this.isDragging = true;
        this.mouseHasMoved = false;
        this.startX = e.clientX;
        this.startY = e.clientY;
        this.container.style.cursor = "grabbing";
      });

      window.addEventListener("mousemove", (e) => {
        if (!this.isDragging) return;
        const deltaX = e.clientX - this.startX;
        const deltaY = e.clientY - this.startY;
        if (Math.abs(deltaX) > 5 || Math.abs(deltaY) > 5) {
          this.mouseHasMoved = true;
        }
        const now = Date.now();
        const dt = Math.max(10, now - this.lastDragTime);
        this.lastDragTime = now;
        this.dragVelocityX = deltaX / dt;
        this.dragVelocityY = deltaY / dt;
        this.targetX += deltaX;
        this.targetY += deltaY;
        this.startX = e.clientX;
        this.startY = e.clientY;
      });

      window.addEventListener("mouseup", () => {
        if (this.isDragging) {
          this.isDragging = false;
          this.container.style.cursor = "grab";
          if (Math.abs(this.dragVelocityX) > 0.1 || Math.abs(this.dragVelocityY) > 0.1) {
            this.targetX += this.dragVelocityX * this.settings.momentumFactor;
            this.targetY += this.dragVelocityY * this.settings.momentumFactor;
          }
        }
      });

      this.container.addEventListener("touchstart", (e) => {
        this.isDragging = true;
        this.mouseHasMoved = false;
        this.startX = e.touches[0].clientX;
        this.startY = e.touches[0].clientY;
      });

      window.addEventListener("touchmove", (e) => {
        if (!this.isDragging) return;
        const deltaX = e.touches[0].clientX - this.startX;
        const deltaY = e.touches[0].clientY - this.startY;
        if (Math.abs(deltaX) > 5 || Math.abs(deltaY) > 5) {
          this.mouseHasMoved = true;
        }
        this.targetX += deltaX;
        this.targetY += deltaY;
        this.startX = e.touches[0].clientX;
        this.startY = e.touches[0].clientY;
      }, { passive: false });

      window.addEventListener("touchend", () => {
        this.isDragging = false;
      });
    }
  }

  init() {
    if (this.container && this.canvas) {
      const totalWidth = this.columns * this.cellWidth;
      const totalRows = Math.ceil(this.itemCount / this.columns);
      const totalHeight = totalRows * this.cellHeight;
      this.currentX = this.targetX = (this.container.clientWidth - totalWidth) / 2;
      this.currentY = this.targetY = (this.container.clientHeight - totalHeight) / 2;
      this.updateVisibleItems();
      this.attachDragEvents();
      this.animate();
    }
  }
}

function initBlur() {
  const root = document.documentElement;
  document.querySelectorAll(".blur").forEach(el => {
    const layers = parseInt(getComputedStyle(root).getPropertyValue("--layers")) || 5;
    const content = Array.from({ length: layers }, (_, i) => `<div style="--i:${i}"></div>`).join("");
    el.innerHTML = content;
  });
}

const projects = [
  { id: 1, title: "Phenom", year: "UX Strategist", image: "https://i.ibb.co/WWCxWtK8/603d61b96ca6f0c336165b6e-DSC09310.webp" },
  { id: 2, title: "Independent", year: "UX Consultant", image: "https://i.ibb.co/TDk7M7zh/1-KE8g-FA6w4wud1u-DAr-A4-Yv-Q.webp" },
  { id: 3, title: "Publicis Sapient", year: "Sr. Product Designer", image: "https://i.ibb.co/mCK7D4Xb/1-Oen-HCQm-Ga10wp-Cz-R8o9-Pt-A.webp" },
  { id: 4, title: "Code & Theory", year: "ACD, Interactive", image: "https://i.ibb.co/GQM6jmpJ/1-1gjr-Eff-Bio-JYo-EAv-MWHf-KQ.webp" },
  { id: 5, title: "Elva Design Group", year: "Sr. UX Designer", image: "https://i.ibb.co/pvJvGhnt/ZAX02330-1.webp" },
  { id: 6, title: "Huge", year: "Sr. UX Designer", image: "https://i.ibb.co/B6vFwH6/zoom-zack.gif" },
  { id: 7, title: "LiveArea", year: "Manager, UX", image: "https://i.ibb.co/Xr97WzXX/DSC06055-1.webp" },
  { id: 8, title: "PHI  NYC", year: "Paradigm Shift", image: "https://i.ibb.co/fYM2drZG/1-UATKEet6-Vtc-Lk-A8r-Yspj-FQ.webp" },
  { id: 9, title: "Workarea", year: "UX Designer", image: "https://i.ibb.co/N2yd0jJV/1-l-EJetj-Ut85-CTbb24d-BTFk-A.webp" },
  { id: 10, title: "O3 World", year: "UX Designer", image: "https://i.ibb.co/LXmyD2hq/IMG-20170104-184947-650.webp" },
  { id: 11, title: "160 Over 90", year: "Interactive Designer", image: "https://i.ibb.co/CpkzWmRn/IMG-20151206-143245434-01.webp" }
];

function renderProjects(container) {
  if (container) {
    container.innerHTML = "";
    projects.forEach(proj => {
      const item = document.createElement("div");
      item.classList.add("project-item");
      item.dataset.id = proj.id;
      item.dataset.image = proj.image;
      item.innerHTML = `<div class="project-title">${proj.title}</div><p class="project-year">${proj.year}</p>`;
      container.appendChild(item);
    });
  }
}

function initialAnimation() {
  const items = document.querySelectorAll(".project-item");
  items.forEach((item, index) => {
    item.style.opacity = "0";
    item.style.transform = "translateY(20px)";
    setTimeout(() => {
      item.style.transition = "opacity 0.8s ease, transform 0.8s ease";
      item.style.opacity = "1";
      item.style.transform = "translateY(0)";
    }, 60 * index);
  });
}

function setupHoverEvents(imgEl, projectsContainer) {
  projects.forEach(proj => {
    const preloadImg = new Image();
    preloadImg.crossOrigin = "anonymous";
    preloadImg.src = proj.image;
  });
  if (imgEl && projectsContainer) {
    projectsContainer.querySelectorAll(".project-item").forEach(item => {
      item.addEventListener("mouseenter", () => {
        imgEl.style.transition = "none";
        imgEl.style.transform = "scale(1.2)";
        imgEl.src = item.dataset.image;
        imgEl.style.opacity = "1";
        requestAnimationFrame(() => {
          requestAnimationFrame(() => {
            imgEl.style.transition = "transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94)";
            imgEl.style.transform = "scale(1.0)";
          });
        });
      });
    });
    projectsContainer.addEventListener("mouseleave", () => {
      imgEl.style.opacity = "0";
    });
  }
}

function preloadImages() {
  projects.forEach(proj => {
    const img = new Image();
    img.crossOrigin = "anonymous";
    img.src = proj.image;
  });
}

function onNavigateToHome() {
  document.body.classList.add("homepage");
  document.querySelectorAll(".blur, .vignette-bottom, .page-vignette-container, .page-vignette, .page-vignette-strong, .page-vignette-extreme")
    .forEach(el => {
      el.style.display = "none";
      el.offsetHeight;
      el.style.display = "";
    });
}

function onNavigateAwayFromHome() {
  document.body.classList.remove("homepage");
}

document.addEventListener("DOMContentLoaded", () => {
  const navigation = new Navigation("nav", "#spotlight fePointLight");
  const logoSpotlight = new LogoSpotlight(".logo-wrapper", "logoLight");

  function initLifeScroll() {
    const lifePage = document.getElementById("page-life");
    if (lifePage && lifePage.classList.contains("active") && typeof initLifeScrollProgress === "function") {
      initLifeScrollProgress();
    }
  }

  navigation.attachEvents(initLifeScroll);
  navigation.resizeLogoCenter(logoSpotlight.centreLogo);
  navigation.setActivePage("page-home");

  // Remove all nav active states on first load
  const homeLink = document.querySelector('nav a[data-page="home"]');
  if (homeLink) {
    document.querySelectorAll("nav a").forEach(link => link.removeAttribute("data-active"));
    // Do not set any link as active here.
  }

  const logoWrapper = document.querySelector(".logo-wrapper");
  if (logoWrapper) {
    logoWrapper.addEventListener("click", (e) => {
      e.preventDefault();
      const homeLink = document.querySelector('nav a[data-page="home"]');
      if (homeLink) {
        document.querySelectorAll("nav a").forEach(link => link.removeAttribute("data-active"));
        homeLink.setAttribute("data-active", "true");
      }
      navigation.setActivePage("page-home");
      navigation.moveNavLight(navigation.centerX(homeLink));
      initLifeScroll();
    });
    logoWrapper.style.cursor = "pointer";
  }

  initLifeScroll();
  new GooeyCursor("cursor", 16);

  const isMobile = window.matchMedia("(max-width: 600px)").matches;
  new HomeGallery({
    items: [
      "Gallery Image 1", "Gallery Image 2", "Gallery Image 3", "Gallery Image 4", "Gallery Image 5",
      "Gallery Image 6", "Gallery Image 7", "Gallery Image 8", "Gallery Image 9", "Gallery Image 10",
      "Gallery Image 11", "Gallery Image 12", "Gallery Image 13", "Gallery Image 14", "Gallery Image 15",
      "Gallery Image 16", "Gallery Image 17", "Gallery Image 18", "Gallery Image 19", "Gallery Image 20",
      "Gallery Image 21", "Gallery Image 22", "Gallery Image 23", "Gallery Image 24", "Gallery Image 25",
      "Gallery Image 26", "Gallery Image 27", "Gallery Image 28", "Gallery Image 29", "Gallery Image 30",
      "Gallery Image 31", "Gallery Image 32", "Gallery Image 33", "Gallery Image 34", "Gallery Image 35",
      "Gallery Image 36", "Gallery Image 37", "Gallery Image 38", "Gallery Image 39"
    ],
    imageUrls: [
      "https://i.ibb.co/PztRrNhR/603a93eddcd3ab104d64fcbb-ZAX09767.webp",
      "https://i.ibb.co/9HzBPc7Y/603a93eea83b1aab7a98c35b-DSC08228.webp",
      "https://i.ibb.co/mrYPqc5K/603a93eedcd3ab4b2e64fcbc-IMG-4204.webp",
      "https://i.ibb.co/RG7ymtn5/603a93eedce047078935438a-IMG-5686.webp",
      "https://i.ibb.co/VcxChJB1/603a93eef8754819192222f7-DSC09720.webp",
      "https://i.ibb.co/bjCjbfbT/603a93efdfd184c21ef2d238-IMG-3352.webp",
      "https://i.ibb.co/39wDDcbS/603a93f0e815e830d1783e07-IMG-2033.webp",
      "https://i.ibb.co/wNFR8hJR/603a93f1d03490ae9d2aa64a-IMG-3824.webp",
      "https://i.ibb.co/5Xr0MDSw/603a93f06a41f45766a3361a-DSC09212.webp",
      "https://i.ibb.co/FLS6ZdgN/603a95ed29478f4bc91875b5-DSC08933.webp",
      "https://i.ibb.co/9HWqZ86P/603a95edd9a3b56723de7edc-DSC00910.webp",
      "https://i.ibb.co/fdT1YyzJ/603a95edd03490eb412aaedc-DSC08676.webp",
      "https://i.ibb.co/zWBgb5Sj/603a95ee83ba30ff4ac9bc6a-DSC00423-1.webp",
      "https://i.ibb.co/0yjJ4j8L/603a967a5dc3e982f571b744-ZAX00968.webp",
      "https://i.ibb.co/Kph6fp3M/603a967a6a41f4d56ca33b1a-ZAX00794.webp",
      "https://i.ibb.co/tpK7LjSv/603a967ac64cec73069e2454-ZAX09877.webp",
      "https://i.ibb.co/rR91Q0Z4/603a967ad03490104c2aaefe-ZAX01042-2.webp",
      "https://i.ibb.co/m5sNTvYX/603a967916b10d5bef5a6dd8-ZAX02712-1.webp",
      "https://i.ibb.co/QvHqKh2P/603afe37ba16f8f9174cf501-IMG-1878.webp",
      "https://i.ibb.co/JX320Vw/603b3890dcd3ab104d67d405-ZAX01233-2.webp",
      "https://i.ibb.co/VYQs1pyb/603d0b8abf1990616037cc35-ZAX03810.webp",
      "https://i.ibb.co/yFz4P7cG/603d0b8b04655c6fd42d2253-DSC08281.webp",
      "https://i.ibb.co/9HZMK0nw/603d0b8b038105ae6904872a-DSC08334.webp",
      "https://i.ibb.co/8njbYh3K/603d0b5635e8053bc120bec7-DSC09034.webp",
      "https://i.ibb.co/5gddKNw3/603d0bb2331da47ee88db089-DSC02085.webp",
      "https://i.ibb.co/Fbr1sSb6/603d8d7a3a6df470a4a661a1-DSC00726.webp",
      "https://i.ibb.co/zWkXCBb9/603d61b96ca6f0c336165b6e-DSC09310.webp",
      "https://i.ibb.co/DPyhP1T7/603d100d889053cc334ee5fc-IMG-2083.webp",
      "https://i.ibb.co/KjzkkW68/603d102d0f02c70fdf7d84eb-IMG-4696.webp",
      "https://i.ibb.co/N2cSNMf4/603d102d9f59a611886a6893-IMG-2151.webp",
      "https://i.ibb.co/RkfwmHWj/603d102dae26b192aef6ab4a-IMG-3023.webp",
      "https://i.ibb.co/QFKMY1sH/603d138e1d5ed053b509992a-IMG-5199.webp",
      "https://i.ibb.co/pvFThr4K/603d1185b8ec32082f451ba9-IMG-3882.webp",
      "https://i.ibb.co/WNtnFQqP/603d1185cafcb2591f42b1ad-IMG-3932.webp",
      "https://i.ibb.co/1Y2gsgBy/603d6207dcd0225713fe1549-IMG-4484.webp",
      "https://i.ibb.co/k2svMNFv/603d10120fba838e599b6b5e-IMG-1563.webp",
      "https://i.ibb.co/BKv7177j/603d6216612acc7c7e54bef2-IMG-1158.webp",
      "https://i.ibb.co/6Rqf37ft/6039d4bbb15be328fc33b54d-IMG-6478.webp",
      "https://i.ibb.co/ccSZT30x/603985613b870e6cd6c49a29-IMG-3457.webp"
    ],
    settings: isMobile ? {
      baseWidth: 320,
      smallHeight: 320,
      largeHeight: 320,
      itemGap: 5,
      hoverScale: 1.05,
      expandedScale: 0.4,
      dragEase: 0.075,
      momentumFactor: 140,
      bufferZone: 1,
      borderRadius: 0,
      vignetteSize: 140,
      vignetteStrength: 0.7,
      overlayOpacity: 0.9,
      overlayEaseDuration: 0.8,
      zoomDuration: 0.6
    } : {
      baseWidth: 400,
      smallHeight: 400,
      largeHeight: 400,
      itemGap: 15,
      hoverScale: 1.05,
      expandedScale: 0.4,
      dragEase: 0.075,
      momentumFactor: 200,
      bufferZone: 1,
      borderRadius: 0,
      vignetteSize: 200,
      vignetteStrength: 0.7,
      overlayOpacity: 0.9,
      overlayEaseDuration: 0.8,
      zoomDuration: 0.6
    },
    containerSelector: "#page-home .container",
    canvasSelector: "canvas"
  });

  initBlur();

  if (typeof Sketch === "function") {
    new Sketch({ dom: document.getElementById("webgl-bg") });
  }

  const projectsContainer = document.querySelector("#page-work .projects-container");
  const backgroundImage = document.getElementById("background-image");
  renderProjects(projectsContainer);
  initialAnimation();
  preloadImages();
  setupHoverEvents(backgroundImage, projectsContainer);
});

/* ===================================================================== */
/* RESUME BUTTON CREATION & VISIBILITY TOGGLING FUNCTIONALITY */
/* ===================================================================== */
document.addEventListener("DOMContentLoaded", () => {
  // Create the glassy button container and its inner elements
  const resumeContainer = document.createElement('div');
  resumeContainer.classList.add('work-glassy-button-container');
  // Initially hide the container with display:none and 0 opacity
  resumeContainer.style.display = 'none';
  resumeContainer.style.opacity = '0';
  resumeContainer.style.transition = 'opacity 0.5s ease-in';

  const wrap = document.createElement('div');
  wrap.classList.add('glassy-button-wrap');

  const shadow = document.createElement('div');
  shadow.classList.add('glassy-button-shadow');

  const button = document.createElement('button');
  button.classList.add('glassy-button');
  button.type = 'button';
  button.addEventListener('click', () => {
    window.location.href = 'https://reasonably.cc/resume';
  });

  const span = document.createElement('span');
  span.textContent = 'View Resume';

  // Assemble the button elements
  button.appendChild(span);
  wrap.appendChild(shadow);
  wrap.appendChild(button);
  resumeContainer.appendChild(wrap);

  // Append the resume container to the body
  document.body.appendChild(resumeContainer);

  // Function to update resume button visibility based on active page id
  function toggleResumeButton() {
    const activePage = document.querySelector(".page.active");
    if (activePage && (activePage.id === "page-home" || activePage.id === "page-connect")) {
      // Hide resume button on homepage and connect page
      resumeContainer.style.display = "none";
      resumeContainer.style.opacity = "0";
    } else {
      // Show the resume button on all other pages
      resumeContainer.style.display = "block";
      // Force reflow to ensure the opacity transition takes effect
      void resumeContainer.offsetWidth;
      resumeContainer.style.opacity = "1";
    }
  }

  // Call toggle function on load
  toggleResumeButton();

  // Use a MutationObserver to watch for changes in page active state
  const pages = document.querySelectorAll(".page");
  const observer = new MutationObserver(toggleResumeButton);
  pages.forEach(page => {
    observer.observe(page, {
      attributes: true,
      attributeFilter: ["class"]
    });
  });

  // Listen for hashchange and popstate for additional navigation events
  window.addEventListener("hashchange", toggleResumeButton);
  window.addEventListener("popstate", toggleResumeButton);
});

/* ===================================================================== */
/* Additional Back-to-Top & Scroll Events, WebGL sketch code, etc. Below */
/* ===================================================================== */

// Back-to-top button handling for the Life page
(function () {
  const backToTopBtn = document.getElementById("back-to-top-life");
  const lifePage = document.getElementById("page-life");
  if (backToTopBtn && lifePage) {
    window.addEventListener("scroll", debounce(() => {
      const scrollY = window.scrollY || document.documentElement.scrollTop;
      if (scrollY > lifePage.offsetTop + 200) {
        backToTopBtn.classList.add("visible");
      } else {
        backToTopBtn.classList.remove("visible");
      }
    }, 50), { passive: true });
    backToTopBtn.addEventListener("click", (e) => {
      e.preventDefault();
      window.scrollTo({ top: lifePage.offsetTop, behavior: "smooth" });
    });
  }
})();

// Responsive scaling
(function (minWidth = 375) {
  const adjustScale = () => {
    document.documentElement.style.minWidth = `${minWidth}px`;
    document.body.style.minWidth = `${minWidth}px`;
    if (window.innerWidth < minWidth) {
      const scale = window.innerWidth / minWidth;
      document.body.style.transformOrigin = "top left";
      document.body.style.transform = `scale(${scale})`;
      document.body.style.width = `${minWidth}px`;
      document.documentElement.style.overflowX = "hidden";
    } else {
      document.body.style.transform = "";
      document.body.style.width = "";
      document.documentElement.style.overflowX = "auto";
    }
  };
  window.addEventListener("resize", debounce(adjustScale, 50));
  window.addEventListener("DOMContentLoaded", adjustScale);
  adjustScale();
})(375);

// Back-to-glassy button functionality
(function () {
  const container = document.getElementById("back-to-glassy-container");
  const button = document.getElementById("back-to-glassy");
  if (!container || !button) return;
  let scrollContainer = null;
  const lifePage = document.getElementById("page-life");
  if (lifePage) {
    const content = lifePage.querySelector(".content");
    if (content && content.scrollHeight > content.clientHeight) {
      scrollContainer = content;
    }
  }
  if (!scrollContainer) scrollContainer = window;
  const toggleVisibility = () => {
    const scrollTop = scrollContainer === window ? window.scrollY || document.documentElement.scrollTop : scrollContainer.scrollTop;
    if (scrollTop > 0) {
      container.classList.add("visible");
    } else {
      container.classList.remove("visible");
    }
  };
  scrollContainer.addEventListener("scroll", debounce(toggleVisibility, 50), { passive: true });
  button.addEventListener("click", (e) => {
    e.preventDefault();
    if (scrollContainer === window) {
      window.scrollTo({ top: 0, behavior: "smooth" });
    } else {
      scrollContainer.scrollTo({ top: 0, behavior: "smooth" });
    }
  });
  toggleVisibility();
})();

// Additional back-to-top for Life page
(function () {
  const backToTop = document.getElementById("back-to-top-life");
  const lifePage = document.getElementById("page-life");
  if (backToTop && lifePage) {
    window.addEventListener("scroll", debounce(() => {
      if ((window.scrollY || document.documentElement.scrollTop) > 200) {
        backToTop.classList.add("visible");
      } else {
        backToTop.classList.remove("visible");
      }
    }, 50), { passive: true });
    backToTop.addEventListener("click", (e) => {
      e.preventDefault();
      window.scrollTo({ top: 0, behavior: "smooth" });
    });
  }
})();

// WebGL Sketch Code
const vertex = `
  varying vec3 pos;
  uniform float time;
  varying float v_noise;
  varying vec2 vUv;
  void main() {
    pos = position;
    vUv = uv;
    vec3 newPosition = position;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);
  }
`;

const fragment = `
  varying vec3 pos;
  varying vec2 vUv;
  varying float v_noise;
  uniform float time;
  uniform sampler2D matCap;
  uniform vec4 resolution;
  uniform vec2 mouse;
  uniform float progress;
  uniform float particleNumber;
  #define PI 3.14159265359
  mat4 rotationMatrix(vec3 axis, float angle) {
    axis = normalize(axis);
    float s = sin(angle);
    float c = cos(angle);
    float oc = 1.0 - c;
    return mat4(
      oc * axis.x * axis.x + c,         oc * axis.x * axis.y - axis.z * s, oc * axis.z * axis.x + axis.y * s, 0.0,
      oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,        oc * axis.y * axis.z - axis.x * s, 0.0,
      oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s, oc * axis.z * axis.z + c,         0.0,
      0.0,                              0.0,                              0.0,                              1.0
    );
  }
  vec3 rotate(vec3 v, vec3 axis, float angle) {
    mat4 m = rotationMatrix(axis, angle);
    return (m * vec4(v, 1.0)).xyz;
  }
  vec2 getmatcap(vec3 eye, vec3 normal) {
    vec3 reflected = reflect(eye, normal);
    float m = 2.8284271247461903 * sqrt(reflected.z + 1.0);
    return reflected.xy / m + 0.5;
  }
  float sdSphere(vec3 p, float s) {
    return length(p) - s;
  }
  float sdBox(vec3 p, vec3 b) {
    vec3 q = abs(p) - b;
    return length(max(q, 0.0)) + min(max(q.x, max(q.y, q.z)), 0.0);
  }
  float smin(float a, float b, float k) {
    float h = clamp(0.5 + 0.5 * (b - a) / k, 0.0, 1.0);
    return mix(b, a, h) - k * h * (1.0 - h);
  }
  float rand(vec2 co) {
    return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);
  }
  float sdf(vec3 p) {
    vec3 p1 = rotate(p, vec3(0.1), time / 5.0);
    float box = smin(sdBox(p1, vec3(0.3)), sdSphere(p, 0.4), 0.3);
    float final = mix(box, sdSphere(p, 0.2 + progress / 4.0), progress);
    for (int i = 0; i < int(particleNumber); i++) {
      float randOffset = rand(vec2(i, 0.0));
      float progr = fract(time / 4.0 + randOffset * 5.0);
      vec3 rPos = vec3(sin(randOffset * 2.0 * PI) * 2.0, cos(randOffset * 2.0 * PI) * 2.0, 0.0);
      float gotoCenter = sdSphere(p - rPos * progr, 0.12);
      final = smin(final, gotoCenter, 0.3);
    }
    float mouseSphere = sdSphere(p - vec3(mouse * resolution.zw * 2.0, 0.0), 0.25);
    return smin(final, mouseSphere, 0.4);
  }
  vec3 calcNormal(in vec3 p) {
    const float eps = 0.0001;
    const vec2 h = vec2(eps, 0.0);
    return normalize(vec3(
      sdf(p + vec3(h.x, h.y, h.y)) - sdf(p - vec3(h.x, h.y, h.y)),
      sdf(p + vec3(h.y, h.x, h.y)) - sdf(p - vec3(h.y, h.x, h.y)),
      sdf(p + vec3(h.y, h.y, h.x)) - sdf(p - vec3(h.y, h.y, h.x))
    ));
  }
  void main() {
    float dist = length(vUv - vec2(0.5));
    vec3 bg = vec3(mix(vec3(0.1), vec3(0.0), dist));
    vec2 newUv = (vUv - vec2(0.5)) * resolution.zw + vec2(0.5);
    vec3 cameraPos = vec3(0.0, 0.0, 2.0);
    vec3 ray = normalize(vec3((vUv - vec2(0.5)) * resolution.zw, -1.0));
    vec3 rayPos = cameraPos;
    float t = 0.0;
    float tMax = 5.0;
    for (int i = 0; i < 256; i++) {
      vec3 pos = cameraPos + t * ray;
      float h = sdf(pos);
      if (h < 0.001 || t > tMax) break;
      t += h;
    }
    vec4 color = vec4(bg, 1.0);
    if (t < tMax) {
      vec3 pos = cameraPos + t * ray;
      vec3 normal = calcNormal(pos);
      float diff = dot(vec3(1.0), normal);
      vec2 matCapUv = getmatcap(ray, normal);
      color = texture2D(matCap, matCapUv);
      float fresnel = pow(1.0 + dot(ray, normal), 3.0);
      color = mix(color, vec4(bg, 0.5), fresnel);
    }
    gl_FragColor = vec4(color);
  }
`;

const matCap = "https://raw.githubusercontent.com/nidorx/matcaps/master/1024/293534_B2BFC5_738289_8A9AA7.png";

class Sketch {
  constructor({ dom }) {
    this.time = 0;
    this.container = dom;
    this.scene = new THREE.Scene();
    this.width = this.container.offsetWidth;
    this.height = this.container.offsetHeight;
    this.camera = new THREE.OrthographicCamera(-0.5, 0.5, 0.5, -0.5, -1e3, 1e3);
    this.camera.position.z = 1;
    this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    this.container.appendChild(this.renderer.domElement);
    this.resizeSetup();
    this.mouseEvents();
    this.addObjects();
  }

  resizeSetup() {
    window.addEventListener("resize", this.resize.bind(this));
  }

  resize() {
    if (!this.material) return;
    this.width = this.container.offsetWidth;
    this.height = this.container.offsetHeight;
    this.renderer.setSize(this.width, this.height);
    this.camera.aspect = this.width / this.height;
    this.camera.updateProjectionMatrix();
    this.imageAspect = 1;
    let t, e;
    if (this.width / this.height > this.imageAspect) {
      t = (this.width / this.height) * this.imageAspect;
      e = 1;
    } else {
      t = 1;
      e = (this.width / this.height) * this.imageAspect;
    }
    this.material.uniforms.resolution.value.x = this.width;
    this.material.uniforms.resolution.value.y = this.height;
    this.material.uniforms.resolution.value.z = t;
    this.material.uniforms.resolution.value.w = e;
  }

  mouseEvents() {
    this.mouse = new THREE.Vector2();
    document.addEventListener("mousemove", (e) => {
      this.mouse.x = e.pageX / this.width - 0.5;
      this.mouse.y = -e.pageY / this.height + 0.5;
    });
  }

  addObjects() {
    const loader = new THREE.TextureLoader();
    loader.crossOrigin = "";
    loader.load(matCap, (texture) => {
      this.geometry = new THREE.PlaneGeometry(1, 1, 1, 1);
      this.material = new THREE.ShaderMaterial({
        extensions: { derivatives: "#extension GL_OES_standard_derivatives : enable" },
        side: THREE.DoubleSide,
        vertexShader: vertex,
        fragmentShader: fragment,
        transparent: true,
        uniforms: {
          time: { value: this.time },
          mouse: { value: new THREE.Vector2(0, 0) },
          progress: { value: 0 },
          matCap: { value: texture },
          resolution: { value: new THREE.Vector4() },
          particleNumber: { value: 0 }
        }
      });
      this.mesh = new THREE.Mesh(this.geometry, this.material);
      this.scene.add(this.mesh);
      this.resize();
      this.render();
    }, undefined, (err) => {
      console.error("Texture failed to load:", err);
    });
  }

  render() {
    this.time += 0.05;
    if (this.material) {
      this.material.uniforms.time.value = this.time;
      if (this.mouse) this.material.uniforms.mouse.value = this.mouse;
    }
    this.renderer.render(this.scene, this.camera);
    requestAnimationFrame(this.render.bind(this));
  }
}

new Sketch({ dom: document.getElementById("webgl-bg") });

$(function () {
  function spanize($elem, delayFactor) {
    const originalText = $elem.data("original") || $elem.text();
    $elem.data("original", originalText);
    let html = "";
    originalText.split("").forEach((char, index) => {
      const escaped = char === " " ? " " : $("<div/>").text(char).html();
      html += `<span style="animation-delay:${delayFactor * index}s">${escaped}</span>`;
    });
    $elem.html(html);
    return originalText.length;
  }

  function activateSection(type, activate) {
    $(".mast__title, .mast__text").removeClass("active");
    const $title = $(`.mast__title[data-type="${type}"]`).addClass("active");
    const $text = $(`.mast__text[data-type="${type}"]`);
    if (activate) {
      $text.addClass("active");
    } else {
      $text.removeClass("active");
    }
    spanize($title, 0.05);
    if (activate) spanize($text, 0.02);
  }

  $(".mast__title.js-spanize").each(function () {
    spanize($(this), 0.05);
  });

  $(".mast__text.js-spanize").each(function () {
    spanize($(this), 0.02);
  });

  // Default: "&" active instead of "Reason"
  $(".mast__title, .mast__text").removeClass("active");
  activateSection("and", true);

  $(".mast__title").on("click", function () {
    activateSection($(this).data("type"), true);
  });
});

document.addEventListener("DOMContentLoaded", function () {
  const container = document.getElementById("back-to-glassy-container");
  function toggleGlassy() {
    if (window.scrollY > 64) {
      container.classList.add("active");
    } else {
      container.classList.remove("active");
    }
  }
  if (container) {
    container.addEventListener("click", function (e) {
      if (e.target.closest(".back-to-glassy-btn")) {
        window.scrollTo({ top: 0, behavior: "smooth" });
      }
    });
    window.addEventListener("scroll", debounce(toggleGlassy, 50), { passive: true });
    toggleGlassy();
  }
});

document.addEventListener("DOMContentLoaded", function () {
  const lifeSections = document.querySelectorAll("#page-life .life-section");
  if (lifeSections.length) {
    const observer = new IntersectionObserver((entries, obs) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add("visible");
          obs.unobserve(entry.target);
        }
      });
    }, { threshold: 0.5 });
    lifeSections.forEach(section => observer.observe(section));
  }
});

(function () {
  const btnContainer = document.getElementById("back-to-top-life-container");
  const backToTop = document.getElementById("back-to-top-life");
  const lifePage = document.getElementById("page-life");
  if (!btnContainer || !backToTop || !lifePage) return;
  const content = lifePage.querySelector(".content");
  const scrollElem = content || window;
  function checkScroll() {
    if ((scrollElem === window ? window.scrollY || document.documentElement.scrollTop : content.scrollTop) > 0) {
      btnContainer.classList.add("visible");
    } else {
      btnContainer.classList.remove("visible");
    }
  }
  if (scrollElem === window) {
    window.addEventListener("scroll", debounce(checkScroll, 50), { passive: true });
  } else {
    content.addEventListener("scroll", debounce(checkScroll, 50), { passive: true });
  }
  backToTop.addEventListener("click", function (e) {
    e.preventDefault();
    if (scrollElem === window) {
      window.scrollTo({ top: 0, behavior: "smooth" });
    } else {
      content.scrollTo({ top: 0, behavior: "smooth" });
    }
  });
  checkScroll();
})();

(function () {
  const backToTop = document.getElementById("back-to-top-life");
  const lifePage = document.getElementById("page-life");
  if (backToTop && lifePage) {
    window.addEventListener("scroll", debounce(() => {
      if ((window.scrollY || document.documentElement.scrollTop) > 200) {
        backToTop.classList.add("visible");
      } else {
        backToTop.classList.remove("visible");
      }
    }, 50), { passive: true });
    backToTop.addEventListener("click", (e) => {
      e.preventDefault();
      window.scrollTo({ top: 0, behavior: "smooth" });
    });
  }
})();

// Optionally, request full-screen mode to minimize system UI interference
function lockScreen() {
  const elem = document.documentElement;
  if (elem.requestFullscreen) {
    elem.requestFullscreen();
  } else if (elem.webkitRequestFullscreen) { // Safari
    elem.webkitRequestFullscreen();
  } else if (elem.msRequestFullscreen) { // IE11
    elem.msRequestFullscreen();
  }
}
lockScreen();

// MAST SEQUENTIAL ANIMATION FOR CONNECT PAGE
document.addEventListener("DOMContentLoaded", function () {
  function animateIn(elem, delay = 0, className = 'mast-fadein') {
    return new Promise(resolve => {
      setTimeout(() => {
        elem.classList.add(className);
        resolve();
      }, delay);
    });
  }

  function getMastElements() {
    const container = document.querySelector('.connect-container .mast__header');
    if (!container) return null;
    const h1s = [
      container.querySelector('.mast__title[data-type="and"]'),
      container.querySelector('.mast__title[data-type="reason"]'),
      container.querySelector('.mast__title[data-type="resolution"]')
    ];
    const ps = [
      container.querySelector('.mast__text[data-type="and"]'),
      container.querySelector('.mast__text[data-type="reason"]'),
      container.querySelector('.mast__text[data-type="resolution"]')
    ];
    return { h1s, ps };
  }

  const mastStyles = document.createElement('style');
  mastStyles.textContent = `
    .connect-container .mast__title, 
    .connect-container .mast__text,
    .connect-container .glassy-button-container {
      opacity: 0;
      transition: opacity 0.8s cubic-bezier(0.25,0.46,0.45,0.94);
    }
    .connect-container .mast__title.mast-fadein,
    .connect-container .mast__text.mast-fadein,
    .connect-container .glassy-button-container.mast-fadein {
      opacity: 1;
    }
  `;
  document.head.appendChild(mastStyles);

  async function runMastSequence() {
    const glassyButtonCont = document.querySelector('.connect-container .glassy-button-container');
    if (glassyButtonCont) {
      glassyButtonCont.classList.remove('mast-fadein');
    }
    const mast = getMastElements();
    if (!mast) return;
    mast.h1s.forEach(h1 => h1 && h1.classList.remove('mast-fadein'));
    mast.ps.forEach(p => { if (p) p.classList.remove('mast-fadein'); });
    for (let i = 0; i < mast.h1s.length; i++) {
      if (mast.h1s[i]) await animateIn(mast.h1s[i], i === 0 ? 0 : 350);
    }
    for (let i = 0; i < mast.ps.length; i++) {
      if (mast.ps[i]) await animateIn(mast.ps[i], 300);
    }
    if (glassyButtonCont) {
      setTimeout(() => {
        glassyButtonCont.classList.add('mast-fadein');
      }, 400);
    }
  }

  function hideGlassyButton() {
    const glassyButtonCont = document.querySelector('.connect-container .glassy-button-container');
    if (glassyButtonCont) {
      glassyButtonCont.classList.remove('mast-fadein');
    }
  }

  function onConnectPageActive() {
    const connectPage = document.getElementById('page-connect');
    if (connectPage && connectPage.classList.contains('active')) {
      runMastSequence();
    }
  }
  onConnectPageActive();
  let lastWasConnect = false;
  setInterval(() => {
    const isConnect = document.getElementById('page-connect')?.classList.contains('active');
    if (isConnect && !lastWasConnect) {
      runMastSequence();
    } else if (!isConnect && lastWasConnect) {
      hideGlassyButton();
    }
    lastWasConnect = isConnect;
  }, 200);

  const glassyBtn = document.querySelector('.connect-container .glassy-button');
  if (glassyBtn) {
    glassyBtn.addEventListener('click', function () {
      window.location.href = 'mailto:zack@reasonably.cc';
    });
  }
});

$(function () {
  function spanize($elem, delayFactor) {
    const originalText = $elem.data("original") || $elem.text();
    $elem.data("original", originalText);
    let html = "";
    originalText.split("").forEach((char, index) => {
      const escaped = char === " " ? " " : $("<div/>").text(char).html();
      html += `<span style="animation-delay:${delayFactor * index}s">${escaped}</span>`;
    });
    $elem.html(html);
    return originalText.length;
  }

  function activateSection(type, activate) {
    $(".mast__title, .mast__text").removeClass("active");
    const $title = $(`.mast__title[data-type="${type}"]`).addClass("active");
    const $text = $(`.mast__text[data-type="${type}"]`);
    if (activate) {
      $text.addClass("active");
    } else {
      $text.removeClass("active");
    }
    spanize($title, 0.05);
    if (activate) spanize($text, 0.02);
  }

  $(".mast__title.js-spanize").each(function () {
    spanize($(this), 0.05);
  });

  $(".mast__text.js-spanize").each(function () {
    spanize($(this), 0.02);
  });

  $(".mast__title, .mast__text").removeClass("active");
  activateSection("and", true);

  $(".mast__title").on("click", function () {
    activateSection($(this).data("type"), true);
  });
});

    document.addEventListener("DOMContentLoaded", () => {
      const hoverSound = document.getElementById("hoverSound");
      document.querySelectorAll("nav ul.content li a").forEach((link) => {
        link.addEventListener("mouseenter", () => {
          if (hoverSound) {
            hoverSound.currentTime = 0;
            hoverSound.volume = 0.4;
            hoverSound.play().catch((error) => {
              console.error("Error playing sound:", error);
            });
          }
        });
      });
    });
  </script>
</body>
</html>
